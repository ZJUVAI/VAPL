{"version":3,"sources":["components/server.ts","components/panelHeader/PanelHeader.tsx","locales/ja.ts","locales/en.ts","locales/translate.ts","components/editor/Editor.tsx","panels/editorPanel/EditorPanel.tsx","components/console/Console.tsx","panels/consolePanel/ConsolePanel.tsx","components/timeline/StatementHighlightContent.tsx","components/timeline/VariableHighlightContent.tsx","components/timeline/Slider.tsx","assets/icon/stepLight.svg","assets/icon/stepDark.svg","assets/icon/stepAllLight.svg","assets/icon/stepAllDark.svg","assets/icon/restartLight.svg","assets/icon/restartDark.svg","assets/icon/stepBackLight.svg","assets/icon/stepBackDark.svg","assets/icon/backAllLight.svg","assets/icon/backAllDark.svg","assets/icon/kaishi2.svg","assets/icon/kaishi1.svg","components/timeline/ControButton.tsx","components/timeline/ControlButtonGroup.tsx","panels/timelinePanel/TimelinePanel.tsx","components/callStack/blockDrawer/BlockDrawer.tsx","components/callStack/block/Block.tsx","components/callStack/CallStack.tsx","components/callStack/animation/AnimationDrawer.tsx","panels/callStackPanel/CallStackPanel.tsx","components/memory/memoryBlock/MemoryCell.tsx","components/memory/memoryBlock/MemoryBlock.tsx","components/memory/LogicalView.tsx","components/memory/MemoryDetail.tsx","components/memory/PhysicalView.tsx","components/subtitleBlock/SubtitleBlock.tsx","panels/memoryPanel/MemoryPanel.tsx","assets/icon/logo.svg","assets/icon/icon1.svg","assets/icon/icon2.svg","components/appHeader/AppHeader.tsx","App.tsx","reportWebVitals.ts","index.tsx","components/emitter.tsx"],"names":["server","timer","isExecuting","files","Map","count","interpreter","stateHistory","outputsHistory","progLang","Error","module","this","CPP14Interpreter","Java8Interpreter","Python3Interpreter","dynamicLoadInterpreter","setFileList","file","reader","FileReader","Promise","resolve","reject","onerror","abort","DOMException","onload","result","ArrayBuffer","set","name","readAsArrayBuffer","all","Array","from","map","addFile","filename","delete","request","controlEvent","sourcecode","stdinText","lineNumOfBreakpoint","step","Start","Stop","BackAll","StepBack","Step","StepAll","JumpTo","Exec","SyntaxCheck","reset","lineCount","split","length","state","startStepExecution","execState","recordExecState","stdout","getStdout","output","recordOutputText","linesShowUp","allVariables","variableShowUp","i","push","lineNumber","steps","color","depth","visible","ret","debugState","errors","currentExpr","getCurrentExpr","nextExpr","getNextExpr","stacks","getStacks","functionName","Number","nCodeRange","codeRange","begin","y","forEach","stack","stackName","getVariables","variable","inArray","Object","keys","funcName","currentClassName","constructor","UniBinOp","res","binOp","variableName","lastExpr","nextClassName","uniReturn","returnBinOp","stepCount","outputChange","isOutputChange","uniBinOp","operator","right","UniMethodCall","methodName","left","UniIdent","UniUnaryOp","expr","variables","clearTimeout","undefined","lastState","getIsWaitingForStdin","stdin","stepExecute","isStepExecutionRunning","getLastHistory","currentCount","loop","includes","signal","global","setTimeout","bind","code","checkSyntaxError","PanelHeader","title","className","howToUse","close","debugStart","debugStop","debugBackAll","debugStepBack","debugStep","debugStepAll","changeThemedark","changeThemelight","zoomOut","zoomIn","zoomReset","howToText","uploadFile","warning","editInDebug","continueDebug","restart","rememberCommand","sourceCodeCcpp","String","raw","sourceCodeJava","sourceCodePython","translate","lang","key","ja","en","Editor","props","sentSourcecode","preventedCommand","ace","editorRef","React","isDebugging","checkbox","noAlert","highlightIds","sourceCodeKey","prog","replace","char","toUpperCase","fontSize","showAlert","theme","hideAlert","setHighlightOnCode","slot","send","sessionStorage","setItem","then","response","recieve","catch","e","alert","command","setState","Math","max","a","editor","current","on","acequire","Range","target","domEvent","currentTarget","indexOf","isFocused","clientX","getBoundingClientRect","row","getDocumentPosition","session","getSession","clearBreakpoint","filter","n","setBreakpoint","stop","d3","attr","d","remove","setSyntaxError","AceRange","range","x","end","resize","scrollToLine","getSelection","setSelectionRange","annotations","error","line","column","charPositionInLine","text","getMsg","type","setAnnotations","highlightId","removeMarker","annotation","highlightLines","id","renderAlert","renderEditor","mode","ref","value","tabSize","editorProps","$blockScrolling","Infinity","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","showLineNumbers","readOnly","style","height","width","onChange","onBeforeLoad","Dialog","aria-labelledby","tabIndex","role","Header","closeButton","Title","bsStyle","Footer","onClick","checked","validationState","inputRef","EditorPanel","Console","isReadOnly","endsWith","sendText","slice","transition","duration","tween","j","t","delay","showGutter","marginTop","ConsolePanel","StatementHighlightContent","VariableHighlightContent","Slider","dragStart","stopPropagation","dragging","dragEnd","dragFromSVG","scale","invert","nativeEvent","offsetX","min","round","mouseMove","window","addEventListener","removeEventListener","contentWidth","activeWidth","display","zIndex","overflow","onMouseDown","onMouseMove","rx","ry","ControlButton","iconHrefLight","iconHrefDark","disabled","classNames","xlinkHref","cursor","ControlButtonGroup","useState","start","setStart","setStop","backAll","setBackAll","stepBack","setStepBack","setStep","stepAll","setStepAll","onKeyDown","keyCode","ctrlKey","arrowListJson","getItem","arrowList","JSON","parse","select","clear","useEffect","backAllLight","backAllDark","stepBackLight","stepBackDark","restartLight","startLight","restartDark","startDark","stepLight","stepDark","stepAllLight","stepAllDark","TimelinePanel","variableShowUps","updVariableShowUps","setMax","setVariableHighlights","statementHighlights","setStatementHighlights","setLinesShowUp","setDebugStatus","setDebugState","timelineArea","createRef","timelineWidth","setTimelineWidth","statement","floor","random","formatRgb","splice","options","temp","label","children","varName","unstable_batchedUpdates","debugStatus","clientWidth","linear","domain","arrayToString","array","isArray","fromCharCode","v","startsWith","join","valueToArray","toString","BlockDrawer","blockStacks","blockArrows","update","calcPos","blockStack","BlockStack","setColor","index","getName","calcStackPos","setPos","originX","originY","getBlockTable","blockCellContainer","_x","BlockCell","WIDTH","_y","HEIGHT","calcVariablePos","setHeight","offsetY","setWidth","pos","Vector","blockTable","makeBlockTable","setAxes","getValue","cellss","BlockArrayVariable","BlockVariable","getBlockCellContainer","getX","getY","init","address","cell","pushCell","setType","setAddress","table","concat","parentKey","FONT_SIZE","Block","each","word","words","reverse","tspan","append","pop","node","getComputedTextLength","getWidth","getHeight","fill","stroke","strokeWidth","getColor","list","blockCell","transform","fontWeight","backgroud","renderBlockBackground","content","renderBlockContent","renderArrow","sourceStackName","targetStackName","source","empty","sourceX","sourceY","targetX","getBBox","targetY","CallStack","blockDrawer","getBlockStacks","getBlockArrows","stringify","nextProps","nextBlockStacks","blockStacksLen","nextBlockStacksLen","appendClone","clonedBlock","selectAll","block","block_node","parentNode","blocks","drawOrRemoveBlock","transform-origin","renderStackView","renderBlocks","AnimationDrawer","variableKeys","variableTypes","variableValues","postArgs","getCurrentStack","parseExe","lastClassName","variableDec","methodCall","console","log","uniMethodCall","getMethodArgs","uniVariableDec","variableDef","uniVariableDef","variableValue","returnValue","travelValue","returnValueClass","arg","idx","travelArg","args","CallStackPanel","variableWithSteps","variableChanged","highlightChangedVariable","resetVariableColor","viewBox","refX","refY","markerWidth","markerHeight","orient","cx","cy","r","Component","lastStacks","execStacks","lastValue","curValue","getValueFromStack","targetVariable","blockElement","highlightColor","defaultColor","MemoryCell","selectedVar","handleClick","dataType","active","arr","firstVarInArr","MemoryBlock","Variable","LogicalView","allStacks","setAllStacks","setHeap","setGlobal","curStacks","curHeap","curGlobal","p","substring","defaultMemoryInfo","binaryCode0","binaryCode1","binaryCode2","MemoryDetail","memoryInfo","signMagn","oneComp","twoComp","oneC","d2b","parseInt","num","PhysicalView","SubtitleBlock","isActive","defaultVar","MemoryPanel","viewMode","setViewMode","setSelectedVar","lastVar","setLastVar","handleModeChange","handleSelectMemory","newSelectedVar","hideDetail","AppHeader","logo","menuIcon1","menuIcon2","App","setExecState","setLastState","setVariableShowUps","Fragment","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","emitter","EventEmitter","setMaxListeners","event","listener","emit","removeAllListeners"],"mappings":"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","file":"static/js/main.988020f1.chunk.js","sourcesContent":["import {SyntaxErrorData} from 'unicoen.ts/dist/interpreter/mapper/SyntaxErrorData';\r\nimport {ExecState} from 'unicoen.ts/dist/interpreter/Engine/ExecState';\r\nimport {signal} from './emitter';\r\nimport {Interpreter} from 'unicoen.ts/dist/interpreter/Interpreter';\r\nimport {inArray} from 'jquery';\r\nimport {UniBinOp} from 'unicoen.ts/dist/node/UniBinOp';\r\nimport {UniExpr, UniMethodCall, UniIdent, UniUnaryOp} from 'unicoen.ts';\r\nimport { Variable } from 'unicoen.ts/dist/interpreter/Engine/Variable';\r\n\r\nexport type CONTROL_EVENT =\r\n  | 'Exec'\r\n  | 'Start'\r\n  | 'Stop'\r\n  | 'BackAll'\r\n  | 'StepBack'\r\n  | 'Step'\r\n  | 'StepAll'\r\n  | 'SyntaxCheck'\r\n  | 'JumpTo';\r\nexport type DEBUG_STATE =\r\n  | 'First'\r\n  | 'Debugging'\r\n  | 'stdin'\r\n  | 'EOF'\r\n  | 'Stop'\r\n  | 'Executing';\r\nexport class Request {\r\n  constructor(\r\n    public controlEvent: CONTROL_EVENT,\r\n    public sourcecode: string,\r\n    public stdinText?: string,\r\n    public lineNumOfBreakpoint?: number[],\r\n    public progLang?: string,\r\n    public step?: number\r\n  ) {}\r\n}\r\n\r\nexport class Response {\r\n  constructor(\r\n    public output: string,\r\n    public sourcecode: string,\r\n    public debugState: DEBUG_STATE,\r\n    public step: number,\r\n    public errors: SyntaxErrorData[],\r\n    public files: Map<string, ArrayBuffer>,\r\n    public execState?: ExecState,\r\n    public lastState?: ExecState,\r\n    public stepCount?: number,\r\n    public linesShowUp?: any,\r\n    public allVariables?: any,\r\n    public variableShowUp?: any,\r\n    public outputChange?: boolean\r\n  ) {}\r\n}\r\n\r\nclass Server {\r\n  private timer: NodeJS.Timeout | null = null;\r\n  private isExecuting = false;\r\n  private files: Map<string, ArrayBuffer> = new Map();\r\n  private count = 0;\r\n  private interpreter: Interpreter | null = null;\r\n  private stateHistory: ExecState[] = [];\r\n  private outputsHistory: string[] = [];\r\n\r\n  private async dynamicLoadInterpreter(progLang?: string) {\r\n    if (typeof progLang === 'undefined') {\r\n      throw new Error('Selected programming language is invalid.');\r\n    } else if (progLang === 'c_cpp') {\r\n      // prettier-ignore\r\n      const module = await import(/* webpackChunkName: \"CPP14\" */ 'unicoen.ts/dist/interpreter/CPP14/CPP14Interpreter');\r\n      this.interpreter = new module.CPP14Interpreter();\r\n    } else if (progLang === 'java') {\r\n      // prettier-ignore\r\n      const module = await import(/* webpackChunkName: \"Java8\" */ 'unicoen.ts/dist/interpreter/Java8/Java8Interpreter');\r\n      this.interpreter = new module.Java8Interpreter();\r\n    } else if (progLang === 'python') {\r\n      // prettier-ignore\r\n      const module = await import(/* webpackChunkName: \"Python3\" */ 'unicoen.ts/dist/interpreter/Python3/Python3Interpreter');\r\n      this.interpreter = new module.Python3Interpreter();\r\n    }\r\n  }\r\n  private async reset(progLang?: string) {\r\n    this.count = 0;\r\n    await this.dynamicLoadInterpreter(progLang);\r\n    if (this.interpreter === null) {\r\n      throw new Error('Interpreter is not found');\r\n    }\r\n    this.interpreter.setFileList(this.files);\r\n    this.stateHistory = [];\r\n    this.outputsHistory = [];\r\n  }\r\n\r\n  private addFile(file: File) {\r\n    const reader = new FileReader();\r\n    return new Promise((resolve, reject) => {\r\n      reader.onerror = () => {\r\n        reader.abort();\r\n        reject(new DOMException('Problem parsing input file.'));\r\n      };\r\n\r\n      reader.onload = () => {\r\n        if (reader.result instanceof ArrayBuffer) {\r\n          this.files.set(file.name, reader.result);\r\n          resolve(reader.result);\r\n        } else {\r\n          reject(new DOMException('Problem loading input file.'));\r\n        }\r\n      };\r\n\r\n      reader.readAsArrayBuffer(file);\r\n    });\r\n  }\r\n\r\n  public async upload(files: FileList) {\r\n    await Promise.all(Array.from(files).map((file) => this.addFile(file)));\r\n    return this.files;\r\n  }\r\n\r\n  public delete(filename: string) {\r\n    this.files.delete(filename);\r\n    return this.files;\r\n  }\r\n\r\n  public async send(request: Request): Promise<Response> {\r\n    const {\r\n      controlEvent,\r\n      sourcecode,\r\n      stdinText,\r\n      lineNumOfBreakpoint,\r\n      progLang,\r\n      step = 0,\r\n    } = request;\r\n\r\n    switch (controlEvent) {\r\n      case 'Start': {\r\n        return this.Start(sourcecode, progLang);\r\n      }\r\n      case 'Stop': {\r\n        return this.Stop(sourcecode);\r\n      }\r\n      case 'BackAll': {\r\n        return this.BackAll(sourcecode);\r\n      }\r\n      case 'StepBack': {\r\n        return this.StepBack(sourcecode);\r\n      }\r\n      case 'Step': {\r\n        return this.Step(sourcecode, stdinText);\r\n      }\r\n      case 'StepAll': {\r\n        return this.StepAll(sourcecode, lineNumOfBreakpoint);\r\n      }\r\n      case 'JumpTo': {\r\n        return this.JumpTo(sourcecode, step);\r\n      }\r\n      case 'Exec': {\r\n        return this.Exec(sourcecode, progLang, lineNumOfBreakpoint);\r\n      }\r\n      case 'SyntaxCheck': {\r\n        return this.SyntaxCheck(sourcecode, progLang);\r\n      }\r\n    }\r\n  }\r\n\r\n  private async Start(sourcecode: string, progLang?: string) {\r\n    await this.reset(progLang);\r\n    if (this.interpreter === null) {\r\n      throw new Error('interpreter is not found');\r\n    }\r\n    const lineCount = sourcecode.split(/\\r\\n|\\r|\\n/).length;\r\n    const state = this.interpreter.startStepExecution(sourcecode);\r\n    const execState = this.recordExecState(state);\r\n    const stdout = this.interpreter.getStdout();\r\n    const output = this.recordOutputText(stdout);\r\n    const linesShowUp: {\r\n      lineNumber: number;\r\n      steps: number[];\r\n      color: string;\r\n      depth: number[];\r\n      visible: boolean;\r\n    }[] = [];\r\n    const allVariables: {[key: string]: any} = {};\r\n    const variableShowUp: {\r\n      funcName: string;\r\n      name: string;\r\n      steps: number[];\r\n      color: string;\r\n      visible: boolean;\r\n      variable: Variable;\r\n    }[] = [];\r\n    for (let i = 1; i <= lineCount; i++) {\r\n      linesShowUp.push({\r\n        lineNumber: i,\r\n        steps: [],\r\n        color: '',\r\n        depth: [],\r\n        visible: true,\r\n      });\r\n    }\r\n    let ret: Response = {\r\n      execState,\r\n      output,\r\n      sourcecode,\r\n      debugState: 'First',\r\n      step: this.count,\r\n      errors: [],\r\n      files: this.files,\r\n    };\r\n    this.isExecuting = true;\r\n    while (ret.debugState !== 'EOF' && ret.debugState !== 'stdin') {\r\n      const currentExpr = this.stateHistory[this.count].getCurrentExpr();\r\n      const nextExpr = this.stateHistory[this.count].getNextExpr();\r\n      const stacks = this.stateHistory[this.count].getStacks();\r\n      const functionName = stacks[stacks.length - 1].name;\r\n      let depth = 1;\r\n      if (functionName.split('.').length > 1) {\r\n        depth = Number(functionName.split('.')[1]);\r\n      }\r\n      const nCodeRange = nextExpr.codeRange;\r\n      linesShowUp[nCodeRange.begin.y - 1]['steps'].push(this.count + 1);\r\n      linesShowUp[nCodeRange.begin.y - 1]['depth'].push(depth);\r\n\r\n      stacks.forEach((stack) => {\r\n        const stackName = stack.name.split('.')[0];\r\n        if (!(stackName in allVariables)) {\r\n          allVariables[stackName] = {};\r\n        }\r\n        stack.getVariables().forEach((variable) => {\r\n          if (\r\n            inArray(variable.name, Object.keys(allVariables[stackName])) < 0\r\n          ) {\r\n            allVariables[stackName][variable.name] = variableShowUp.length;\r\n            variableShowUp.push({\r\n              funcName: stackName,\r\n              name: variable.name,\r\n              steps: [this.count],\r\n              color: '',\r\n              visible: true,\r\n              variable: variable\r\n            });\r\n          }\r\n        });\r\n      });\r\n      const currentClassName = currentExpr.constructor.name;\r\n      if (currentExpr instanceof UniBinOp) {\r\n        const res = this.binOp(currentExpr);\r\n        if (res) {\r\n          const stack = stacks[stacks.length - 1];\r\n          const variableName = res;\r\n          variableShowUp[allVariables[stack.name.split('.')[0]][variableName]][\r\n            'steps'\r\n          ].push(this.count);\r\n        }\r\n      }\r\n      let lastExpr = null;\r\n      if (this.count > 0) {\r\n        lastExpr = this.stateHistory[this.count - 1].getNextExpr();\r\n        const nextClassName = lastExpr.constructor.name;\r\n        if ((lastExpr instanceof UniBinOp) && currentClassName !== 'UniBinOp') {\r\n          const res = this.binOp(lastExpr);\r\n          if (res) {\r\n            const stack = stacks[stacks.length - 1];\r\n            const variableName = res;\r\n            variableShowUp[\r\n              allVariables[stack.name.split('.')[0]][variableName]\r\n            ]['steps'].push(this.count + 1);\r\n          }\r\n        } else if (\r\n          nextClassName === 'UniReturn' &&\r\n          currentClassName === 'UniVariableDec'\r\n        ) {\r\n          const stack = stacks[stacks.length - 1];\r\n          variableShowUp[\r\n            allVariables[stack.name.split('.')[0]][this.uniReturn(currentExpr)]\r\n          ]['steps'].push(this.count);\r\n        } else if (\r\n          nextClassName === 'UniReturn' &&\r\n          (currentExpr instanceof UniBinOp)\r\n        ) {\r\n          const res = this.returnBinOp(currentExpr);\r\n          if (res) {\r\n            const stack = stacks[stacks.length - 1];\r\n            const variableName = res;\r\n            variableShowUp[\r\n              allVariables[stack.name.split('.')[0]][variableName]\r\n            ]['steps'].push(this.count);\r\n          }\r\n        }\r\n      }\r\n\r\n      ret = this.Step(sourcecode);\r\n    }\r\n\r\n    // console.log(this.stateHistory);\r\n\r\n    const step = this.count + 1;\r\n    this.isExecuting = true;\r\n    const res = this.BackAll(sourcecode);\r\n    res.stepCount = step;\r\n    res.linesShowUp = linesShowUp;\r\n    res.allVariables = allVariables;\r\n    res.variableShowUp = variableShowUp;\r\n    res.outputChange = this.isOutputChange(this.count);\r\n    return res;\r\n  }\r\n\r\n  private binOp(uniBinOp: UniBinOp) :string|false {\r\n    const operator = uniBinOp.operator;\r\n    const right: UniBinOp | UniExpr | UniMethodCall = uniBinOp.right;\r\n    if (right instanceof UniMethodCall) {\r\n      if (right.methodName.name !== 'malloc') {\r\n        return false;\r\n      }\r\n    }\r\n    else if (right instanceof UniBinOp) {\r\n      return this.binOp(right);\r\n    }\r\n\r\n    if (operator !== '=') {\r\n      const left = uniBinOp.left;\r\n\r\n      if (left instanceof UniMethodCall) {\r\n        return false;\r\n      }\r\n      else if (left instanceof UniBinOp) {\r\n        return this.binOp(left);\r\n      }\r\n    }\r\n    let left = uniBinOp.left;\r\n    if (!left) {\r\n      return false;\r\n    }\r\n    while (!(left instanceof UniIdent)) {\r\n      if (left instanceof UniUnaryOp) {\r\n        left = left.expr;\r\n      } else if (left instanceof UniBinOp) {\r\n        left = left.left;\r\n      }\r\n    }\r\n    return left.name;\r\n  }\r\n\r\n  private uniReturn(expr: any) {\r\n    return expr.variables[0].name;\r\n  }\r\n  private returnBinOp(uniBinOp: UniBinOp) {\r\n    const operator = uniBinOp.operator;\r\n    if (operator === '=') {\r\n      const left: any = uniBinOp.left;\r\n      return left.name;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private Stop(sourcecode: string) {\r\n    if (this.timer !== null) {\r\n      clearTimeout(this.timer);\r\n    }\r\n    this.interpreter = null;\r\n    const ret: Response = {\r\n      sourcecode,\r\n      execState: undefined,\r\n      debugState: 'Stop',\r\n      output: '',\r\n      step: this.count,\r\n      errors: [],\r\n      files: this.files,\r\n    };\r\n    return ret;\r\n  }\r\n\r\n  private BackAll(sourcecode: string) {\r\n    this.count = 0;\r\n    const execState = this.stateHistory[this.count];\r\n    const output = this.outputsHistory[this.count];\r\n    const ret: Response = {\r\n      execState,\r\n      output,\r\n      sourcecode,\r\n      debugState: 'First',\r\n      step: this.count,\r\n      errors: [],\r\n      files: this.files,\r\n    };\r\n    return ret;\r\n  }\r\n\r\n  private StepBack(sourcecode: string) {\r\n    if (1 <= this.count) {\r\n      this.count -= 1;\r\n    }\r\n    const execState = this.stateHistory[this.count];\r\n    let lastState = undefined;\r\n    if (this.count > 0) {\r\n      lastState = this.stateHistory[this.count - 1];\r\n    }\r\n    const output = this.outputsHistory[this.count];\r\n    const ret: Response = {\r\n      execState,\r\n      lastState: lastState,\r\n      output,\r\n      sourcecode,\r\n      debugState: 'Debugging',\r\n      step: this.count,\r\n      errors: [],\r\n      files: this.files,\r\n    };\r\n    return ret;\r\n  }\r\n\r\n  private Step(sourcecode: string, stdinText?: string) {\r\n    ++this.count;\r\n    if (this.count < this.stateHistory.length) {\r\n      const execState = this.stateHistory[this.count];\r\n      let lastState = undefined;\r\n      if (this.count > 0) {\r\n        lastState = this.stateHistory[this.count - 1];\r\n      }\r\n      const output = this.outputsHistory[this.count];\r\n      const ret: Response = {\r\n        execState,\r\n        lastState: lastState,\r\n        output,\r\n        sourcecode,\r\n        debugState: 'Debugging',\r\n        step: this.count,\r\n        errors: [],\r\n        files: this.files,\r\n        outputChange: this.isOutputChange(this.count)\r\n      };\r\n      return ret;\r\n    }\r\n    if (this.isExecuting) {\r\n      if (this.interpreter === null) {\r\n        throw new Error('engine is not found');\r\n      }\r\n      if (this.interpreter.getIsWaitingForStdin()) {\r\n        if (stdinText !== undefined) {\r\n          this.interpreter.stdin(stdinText);\r\n        }\r\n        //  console.log(`stdin:${stdinText}`);\r\n      }\r\n      const state = this.interpreter.stepExecute();\r\n      // let maxSkip = 10;\r\n      // while (state.getCurrentExpr().codeRange === null && 0 < --maxSkip) {\r\n      //   state = this.engine.stepExecute();\r\n      // }\r\n      const execState = this.recordExecState(state);\r\n      const stdout = this.interpreter.getStdout();\r\n      //  console.log(`stdout:${stdout}`);\r\n      const output = this.recordOutputText(stdout);\r\n      //  console.log(`output:${output}`);\r\n      // let stateText = `Step:${this.count} | Value:${execState.getCurrentValue()}`;\r\n      let debugState: DEBUG_STATE = 'Debugging';\r\n      if (this.interpreter.getIsWaitingForStdin()) {\r\n        debugState = 'stdin';\r\n      } else if (!this.interpreter.isStepExecutionRunning()) {\r\n        debugState = 'EOF';\r\n        this.isExecuting = false;\r\n      }\r\n      const ret: Response = {\r\n        execState,\r\n        lastState: this.stateHistory[this.stateHistory.length - 2],\r\n        output,\r\n        sourcecode,\r\n        debugState,\r\n        step: this.count,\r\n        errors: [],\r\n        files: this.files,\r\n        outputChange: this.isOutputChange(this.count)\r\n      };\r\n      return ret;\r\n    }\r\n    this.count = this.stateHistory.length - 1;\r\n    const output = this.outputsHistory[this.count];\r\n    const ret: Response = {\r\n      output,\r\n      sourcecode,\r\n      execState: this.getLastHistory(),\r\n      debugState: 'EOF',\r\n      step: this.count,\r\n      errors: [],\r\n      files: this.files,\r\n      outputChange: this.isOutputChange(this.count)\r\n    };\r\n    return ret;\r\n  }\r\n\r\n  private StepAll(sourcecode: string, lineNumOfBreakpoint?: number[]) {\r\n    const currentCount = this.count;\r\n    const loop = () => {\r\n      const ret: Response = this.Step(sourcecode);\r\n      if (ret.debugState === 'EOF') {\r\n        signal('EOF', ret);\r\n        return;\r\n      } else if (ret.debugState === 'stdin') {\r\n        signal('stdin', ret);\r\n        return;\r\n      } else if (typeof lineNumOfBreakpoint !== 'undefined') {\r\n        if (typeof ret.execState !== 'undefined') {\r\n          const nextExpr = ret.execState.getNextExpr();\r\n          const {codeRange} = nextExpr;\r\n          if (codeRange) {\r\n            if (lineNumOfBreakpoint.includes(codeRange.begin.y - 1)) {\r\n              signal('Breakpoint', ret);\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      this.timer = global.setTimeout(loop.bind(this), 1);\r\n    };\r\n    loop();\r\n    const execState = this.stateHistory[currentCount];\r\n    const output = this.outputsHistory[currentCount];\r\n    const debugState: DEBUG_STATE = 'Executing';\r\n    return {\r\n      execState,\r\n      output,\r\n      sourcecode,\r\n      debugState,\r\n      step: currentCount,\r\n      errors: [],\r\n      files: this.files,\r\n    };\r\n  }\r\n\r\n  private JumpTo(sourcecode: string, step: number) {\r\n    this.count = step;\r\n    const execState = this.stateHistory[this.count];\r\n    let lastState = undefined;\r\n    if (this.count > 0) {\r\n      lastState = this.stateHistory[this.count - 1];\r\n    }\r\n    const output = this.outputsHistory[this.count];\r\n    const ret: Response = {\r\n      execState,\r\n      lastState: lastState,\r\n      output,\r\n      sourcecode,\r\n      debugState: 'Debugging',\r\n      step: this.count,\r\n      errors: [],\r\n      files: this.files,\r\n    };\r\n    return ret;\r\n  }\r\n\r\n  private async Exec(\r\n    sourcecode: string,\r\n    progLang?: string,\r\n    lineNumOfBreakpoint?: number[]\r\n  ) {\r\n    await this.Start(sourcecode, progLang);\r\n    return this.StepAll(sourcecode, lineNumOfBreakpoint);\r\n  }\r\n\r\n  private async SyntaxCheck(code: string, progLang?: string) {\r\n    await this.dynamicLoadInterpreter(progLang);\r\n    if (this.interpreter === null) {\r\n      throw new Error('Interpreter is not found');\r\n    }\r\n    const errors: SyntaxErrorData[] = this.interpreter.checkSyntaxError(code);\r\n    const ret: Response = {\r\n      errors,\r\n      sourcecode: code,\r\n      execState: undefined,\r\n      debugState: 'Stop',\r\n      output: '',\r\n      step: this.count,\r\n      files: this.files,\r\n    };\r\n    return ret;\r\n  }\r\n\r\n  private recordOutputText(output: string) {\r\n    this.outputsHistory.push(output);\r\n    return output;\r\n  }\r\n\r\n  private recordExecState(execState: ExecState) {\r\n    this.stateHistory.push(execState);\r\n    return execState;\r\n  }\r\n\r\n  private getLastHistory() {\r\n    return this.stateHistory[this.stateHistory.length - 1];\r\n  }\r\n\r\n  private isOutputChange(step: number) {\r\n    if (step === 0)\r\n      return false;\r\n    return this.outputsHistory[step].length > this.outputsHistory[step - 1].length;\r\n  }\r\n}\r\n\r\nexport const server = new Server();\r\n","import React from 'react';\r\nimport './style.scss';\r\n\r\ninterface PanelHeaderProps {\r\n    title: string;\r\n}\r\n\r\nfunction PanelHeader({title}: PanelHeaderProps) {\r\n  return (\r\n      <div className='panel-header'>\r\n        <div className='text-title'>{title}</div>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default PanelHeader;\r\n","// tslint:disable:max-line-length\nexport default {\n  howToUse: '',\n  close: '',\n  debugStart: '',\n  debugStop: '',\n  debugBackAll: '',\n  debugStepBack: '1',\n  debugStep: '1',\n  debugStepAll: '',\n  changeThemedark: '',\n  changeThemelight: '',\n  zoomOut: '',\n  zoomIn: '',\n  zoomReset: '',\n  howToText: [\n    '',\n    '()',\n  ],\n  uploadFile: '',\n  warning: '!',\n  editInDebug: `\n\n`,\n  continueDebug: '',\n  restart: '',\n  rememberCommand: '',\n  sourceCodeCcpp: String.raw`#include<stdio.h>\nint recursiveToThree(int n){\n  printf(\"%d th\\n\", n + 1);\n  if(n < 3){\n    int r = recursiveToThree(n + 1);\n    n = r;\n  }\n  return n;\n}\nint main(){\n  int n = 0;//\n\n  n = recursiveToThree(0);//\n\n  int arr[5] = {1, 2, 3};//\n\n  int* ptr = &arr[2];//\n  *ptr = 5;\n\n  //\n  int* d_arry = malloc(sizeof(int) * 3);\n\n  //\n  int* pd_arr[2];\n  pd_arr[0] = malloc(sizeof(int) * 2);\n  pd_arr[1] = malloc(sizeof(int) * 2);\n\n  free(pd_arr[0]);//\n\n  printf(\"Hello,world!\\n\");//\n\n\n  return 0;\n}`,\n  sourceCodeJava: String.raw`import java.util.*;\npublic class Main {\n  public static void main(String[] args) {\n    Scanner sc = new Scanner(System.in);\n    while (true) {\n      int n = sc.nextInt();\n      int r = sc.nextInt();\n      if (n == 0) {\n        break;\n      }\n      int[] a = new int[n];\n      int[] b = new int[n];\n      for (int i = 0; i < n; i++) {\n        a[i] = n - i;\n      }\n      for (int i = 0; i < r; i++) {\n        int p = sc.nextInt();\n        int c = sc.nextInt();\n        p--;\n        for (int j = 0; j < c; j++) {\n          b[j] = a[p + j];\n        }\n        for (int j = 0; j < p; j++) {\n          b[c + j] = a[j];\n        }\n        for (int j = 0; j < p + c; j++) {\n          a[j] = b[j];\n        }\n      }\n      System.out.println(a[0]);\n    }\n  }\n}`,\n  sourceCodePython: String.raw`while True:\n  n, r = map(int, input().split())\n  if n == 0:\n    break\n  a = [0] * n\n  b = [0] * n\n  for i in range(n):\n    a[i] = b[i] = n - i\n  for i in range(r):\n    p, c = map(int, input().split())\n    p = p - 1\n    for j in range(c):\n      b[j] = a[p + j]\n    for j in range(p):\n      b[c + j] = a[j]\n    for j in range(p + c):\n      a[j] = b[j]\n  print(a[0])\n`,\n};\n","// tslint:disable:max-line-length\r\nexport default {\r\n  howToUse: 'How to use',\r\n  close: 'Close',\r\n  debugStart: 'restart step execution',\r\n  debugStop: 'stop execution',\r\n  debugBackAll: 'go backward for all steps',\r\n  debugStepBack: 'step backward',\r\n  debugStep: 'step forward',\r\n  debugStepAll: 'execute all step',\r\n  changeThemedark: 'change to dark theme',\r\n  changeThemelight: 'change to light theme',\r\n  zoomOut: 'change the font size to smaller.',\r\n  zoomIn: 'change the font size to larger.',\r\n  zoomReset: 'reset the font size',\r\n  howToText: [\r\n    'PVC.js has five GUI components:',\r\n    '(1) editor, (2) execution controller, buttons, (3) I/O window, (4) canvas for visualization, and (5) file upload form.',\r\n    'Users can write source code in the editor. Clicking on the execution control buttons initiates the step execution.',\r\n    'The I/O window shows the content of the standard output written by the program (e.g., printf) and accepts standard input (e.g., scanf).',\r\n    \"Canvas shows the program's execution status using tables and figures.\",\r\n    'PVC.js adaptively changes its layout to correspond with the size of the browser window.',\r\n  ],\r\n  uploadFile: 'The uploaded file will be displayed here.',\r\n  warning: 'Warning!',\r\n  editInDebug: `The source code being executed has been edited.\r\nProgram behavior is not affected by changing code. \r\nHowever, the highlight of the code may be out of place.`,\r\n  continueDebug: 'Continue',\r\n  restart: 'Restart',\r\n  rememberCommand: 'Remember this choice',\r\n//   sourceCodeCcpp: String.raw`#include<stdio.h>\r\n// int recursiveToThree(int n){\r\n//   printf(\"%d th\\n\", n + 1);\r\n//   if(n < 3){\r\n//       int r = recursiveToThree(n + 1);\r\n//       n = r;\r\n//   }\r\n//   return n;\r\n// }\r\n\r\n// static int a = 1;\r\n// int b = 2;\r\n\r\n// int main(){\r\n//   int n = 0;//variable declaration\r\n\r\n//   n = recursiveToThree(0);//recursive function\r\n\r\n//   int arr[5] = {1, 2, 3};//array variable\r\n\r\n//   int* ptr = &arr[2];//pointer variable\r\n//   *ptr = 5;\r\n\r\n//   //dynamic memory allocation\r\n//   int* d_arry = malloc(sizeof(int) * 3);\r\n\r\n//   //two-dimensional dynamic array\r\n//   int* pd_arr[2];\r\n//   pd_arr[0] = malloc(sizeof(int) * 2);\r\n//   pd_arr[1] = malloc(sizeof(int) * 2);\r\n\r\n//   printf(\"Hello,world!\\n\");//standard output\r\n\r\n//   free(pd_arr[0]);//memory leak\r\n\r\n//   return 0;\r\n// }`\r\nsourceCodeCcpp: String.raw`#include<stdio.h>\r\n\r\n/*print Fahrenheit-Celsius table\r\n    for fahr = 0, 20, ..., 300 */\r\n\r\nint main() {\r\n  int fahr, celsius;\r\n  int lower, upper, step;\r\n  lower = 0;\r\n  upper = 300;\r\n  step = 20;\r\n  \r\n  fahr = lower;\r\n  while (fahr <= upper) {\r\n    celsius = 5 * (fahr-32) / 9;\r\n    printf(\"%d\\t%d\\n\", fahr, celsius);\r\n    fahr = fahr + step;\r\n  }\r\n}\r\n`\r\n,\r\n  sourceCodeJava: String.raw`import java.util.*;\r\npublic class Main {\r\n  public static void main(String[] args) {\r\n    Scanner sc = new Scanner(System.in);\r\n    while (true) {\r\n      int n = sc.nextInt();\r\n      int r = sc.nextInt();\r\n      if (n == 0) {\r\n        break;\r\n      }\r\n      int[] a = new int[n];\r\n      int[] b = new int[n];\r\n      for (int i = 0; i < n; i++) {\r\n        a[i] = n - i;\r\n      }\r\n      for (int i = 0; i < r; i++) {\r\n        int p = sc.nextInt();\r\n        int c = sc.nextInt();\r\n        p--;\r\n        for (int j = 0; j < c; j++) {\r\n          b[j] = a[p + j];\r\n        }\r\n        for (int j = 0; j < p; j++) {\r\n          b[c + j] = a[j];\r\n        }\r\n        for (int j = 0; j < p + c; j++) {\r\n          a[j] = b[j];\r\n        }\r\n      }\r\n      System.out.println(a[0]);\r\n    }\r\n  }\r\n}`,\r\n  sourceCodePython: String.raw`while True:\r\n  n, r = map(int, input().split())\r\n  if n == 0:\r\n    break\r\n  a = [0] * n\r\n  b = [0] * n\r\n  for i in range(n):\r\n    a[i] = b[i] = n - i\r\n  for i in range(r):\r\n    p, c = map(int, input().split())\r\n    p = p - 1\r\n    for j in range(c):\r\n      b[j] = a[p + j]\r\n    for j in range(p):\r\n      b[c + j] = a[j]\r\n    for j in range(p + c):\r\n      a[j] = b[j]\r\n  print(a[0])\r\n`,\r\n};\r\n","import ja from './ja';\nimport en from './en';\nconst translate = (lang: string, key: string) => {\n  if (lang === 'ja') {\n    return (ja as any)[key];\n  }\n  return (en as any)[key];\n};\nexport default translate;\n","import * as React from 'react';\r\nimport Alert from 'react-bootstrap/lib/Alert';\r\nimport Button from 'react-bootstrap/lib/Button';\r\nimport Modal from 'react-bootstrap/lib/Modal';\r\nimport Checkbox from 'react-bootstrap/lib/Checkbox';\r\n// tslint:disable-next-line:import-name\r\nimport AceEditor from 'react-ace';\r\n\r\nimport 'ace-builds/src-min-noconflict/mode-c_cpp';\r\nimport 'ace-builds/src-min-noconflict/snippets/c_cpp';\r\nimport 'ace-builds/src-min-noconflict/theme-textmate';\r\nimport 'ace-builds/src-min-noconflict/theme-monokai';\r\nimport 'ace-builds/src-min-noconflict/ext-language_tools';\r\nimport * as d3 from 'd3';\r\n\r\nimport './editor.scss';\r\nimport { signal, slot, remove } from '../emitter';\r\nimport {\r\n  Request,\r\n  CONTROL_EVENT,\r\n  server,\r\n  Response,\r\n  DEBUG_STATE,\r\n} from '../server';\r\nimport translate from '../../locales/translate';\r\nimport { ExecState } from 'unicoen.ts/dist/interpreter/Engine/ExecState';\r\nimport { LangProps, ProgLangProps, Theme } from '../Props';\r\nimport { SyntaxErrorData } from 'unicoen.ts/dist/interpreter/mapper/SyntaxErrorData';\r\n\r\ntype Props = LangProps & ProgLangProps;\r\ninterface State {\r\n  fontSize: number;\r\n  showAlert: boolean;\r\n  theme: Theme;\r\n}\r\n\r\ninterface TextRectangle {\r\n  left: number;\r\n  top: number;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\ninterface GutterMousedownEventTarget\r\n  extends React.BaseHTMLAttributes<HTMLElement> {\r\n  getBoundingClientRect: () => TextRectangle;\r\n}\r\ninterface GutterMousedownEvent extends React.MouseEvent {\r\n  domEvent: React.MouseEvent<GutterMousedownEventTarget>;\r\n  editor: AceAjax.Editor;\r\n  getDocumentPosition: () => AceAjax.Position;\r\n  stop: () => void;\r\n}\r\n\r\nexport default class Editor extends React.Component<Props, State> {\r\n  private sentSourcecode: string;\r\n  private preventedCommand: CONTROL_EVENT = 'Stop';\r\n  private controlEvent: CONTROL_EVENT = 'Stop';\r\n  private sourcecode: string;\r\n  private ace: any = null;\r\n  private editorRef = React.createRef<any>();\r\n  private lineNumOfBreakpoint: number[] = [];\r\n  private isDebugging = false;\r\n  private checkbox: HTMLInputElement | null = null;\r\n  private noAlert = false;\r\n  private highlightIds: number[] = [];\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      fontSize: 14,\r\n      showAlert: false,\r\n      theme: 'light',\r\n    };\r\n    const { lang, progLang } = props;\r\n    this.sourcecode = translate(lang, this.sourceCodeKey(progLang));\r\n    this.sentSourcecode = '';\r\n\r\n    this.hideAlert = this.hideAlert.bind(this);\r\n    this.setHighlightOnCode = this.setHighlightOnCode.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const progLang = this.props.progLang;\r\n    slot('debug', (controlEvent: CONTROL_EVENT, stdinText?: string) => {\r\n      this.send(controlEvent, stdinText);\r\n      if (controlEvent === 'StepBack' || controlEvent === 'BackAll') {\r\n        sessionStorage.setItem('exec', 'step');\r\n      } else {\r\n        sessionStorage.setItem('exec', 'debug');\r\n      }\r\n    });\r\n    slot('jumpTo', (step: number) => {\r\n      const request: Request = {\r\n        sourcecode: this.sourcecode,\r\n        controlEvent: 'JumpTo',\r\n        progLang,\r\n        step: step,\r\n      };\r\n      server\r\n        .send(request)\r\n        .then((response: Response) => {\r\n          this.recieve(response);\r\n        })\r\n        .catch((e) => {\r\n          alert('constructor: ' + e);\r\n        });\r\n      sessionStorage.setItem('exec', 'step');\r\n    });\r\n    slot('EOF', (response: Response) => {\r\n      this.recieve(response);\r\n    });\r\n    slot('stdin', (response: Response) => {\r\n      this.recieve(response);\r\n    });\r\n    slot('Breakpoint', (response: Response) => {\r\n      this.recieve(response);\r\n    });\r\n    slot('zoom', (command: string) => {\r\n      if (command === 'In') {\r\n        this.setState({ fontSize: this.state.fontSize + 1 });\r\n      } else if (command === 'Out') {\r\n        this.setState({ fontSize: Math.max(this.state.fontSize - 1, 10) });\r\n      } else if (command === 'Reset') {\r\n        this.setState({ fontSize: 14 });\r\n      }\r\n    });\r\n    slot('changeTheme', async (theme: Theme) => {\r\n      this.setState({ theme });\r\n    });\r\n\r\n    // Enable breakpoint\r\n    const editor: AceAjax.Editor = this.editorRef.current.editor;\r\n    editor.on('keydown', (e: any) => {\r\n      // console.log(e);\r\n    });\r\n    editor.on('guttermousedown', (e: GutterMousedownEvent) => {\r\n      const AceRange = this.ace.acequire('ace/range').Range;\r\n      const target: GutterMousedownEventTarget = e.domEvent.currentTarget;\r\n      if (\r\n        typeof target.className !== 'undefined' &&\r\n        target.className.indexOf('ace_gutter') === -1\r\n      ) {\r\n        return;\r\n      }\r\n      if (!editor.isFocused()) {\r\n        return;\r\n      }\r\n      if (e.clientX > 25 + target.getBoundingClientRect().left) return;\r\n\r\n      const row: number = e.getDocumentPosition().row;\r\n\r\n      const session: AceAjax.IEditSession = e.editor.getSession();\r\n      if (this.lineNumOfBreakpoint.includes(row)) {\r\n        session.clearBreakpoint(row);\r\n        //signal('cancelStatementHighlight', row);\r\n        //const line = d3.selectAll('.ace_line').filter((d, i) => i === row);\r\n        //line.classed('highlight' + row, false);\r\n        this.lineNumOfBreakpoint = this.lineNumOfBreakpoint.filter(\r\n          (n) => n !== row\r\n        );\r\n      } else {\r\n        session.setBreakpoint(row, 'ace_breakpoint');\r\n        this.lineNumOfBreakpoint.push(row);\r\n        //const line = d3.selectAll('.ace_line').filter((d, i) => i === row);\r\n        //line.classed('highlight' + row, true);\r\n        //signal('statementHighlight', row);\r\n      }\r\n      e.stop();\r\n    });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    d3.selectAll('.ace_line')\r\n      // .filter((d, i) => inArray(i, this.lineNumOfBreakpoint) >= 0)\r\n      .attr('class', (d, i) => {\r\n        return `ace_line highlight${i}`;\r\n      });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    remove('debug');\r\n    remove('jumpTo');\r\n    remove('EOF');\r\n    remove('stdin');\r\n    remove('Breakpoint');\r\n    remove('zoom');\r\n    remove('changeTheme');\r\n  }\r\n\r\n  sourceCodeKey = (prog: string) =>\r\n    'sourceCode' +\r\n    prog.replace(/_/g, '').replace(/^[a-z]/g, (char) => char.toUpperCase());\r\n\r\n  // UNSAFE_componentWillReceiveProps(nextProps: Props) {\r\n  //   const { lang, progLang } = this.props;\r\n  //   const nextLang = nextProps.lang;\r\n  //   const nextProgLang = nextProps.progLang;\r\n\r\n  //   if (nextLang !== lang) {\r\n  //     if (this.sourcecode === translate(lang, this.sourceCodeKey(progLang))) {\r\n  //       this.sourcecode = translate(nextLang, this.sourceCodeKey(nextProgLang));\r\n  //     }\r\n  //   } else if (nextProgLang !== progLang) {\r\n  //     this.sourcecode = translate(nextLang, this.sourceCodeKey(nextProgLang));\r\n  //   }\r\n  // }\r\n\r\n  send(controlEvent: CONTROL_EVENT, stdinText?: string) {\r\n    const sourcecode = this.sourcecode;\r\n    const lineNumOfBreakpoint = this.lineNumOfBreakpoint;\r\n    const progLang = this.props.progLang;\r\n    const request: Request = {\r\n      sourcecode,\r\n      controlEvent,\r\n      stdinText,\r\n      lineNumOfBreakpoint,\r\n      progLang,\r\n    };\r\n    this.controlEvent = controlEvent;\r\n    if (controlEvent === 'SyntaxCheck') {\r\n      server\r\n        .send(request)\r\n        .then((response: Response) => {\r\n          const { errors } = response;\r\n          this.setSyntaxError(errors);\r\n        })\r\n        .catch((e) => {\r\n          alert('SyntaxCheck: ' + e);\r\n        });\r\n    } else if (\r\n      !this.noAlert &&\r\n      this.isDebugging &&\r\n      (controlEvent === 'BackAll' ||\r\n        controlEvent === 'StepBack' ||\r\n        controlEvent === 'Step' ||\r\n        controlEvent === 'StepAll') &&\r\n      sourcecode !== this.sentSourcecode\r\n    ) {\r\n      this.preventedCommand = controlEvent;\r\n      this.setState({ showAlert: true });\r\n    } else {\r\n      this.setState({ showAlert: false });\r\n      server\r\n        .send(request)\r\n        .then((response: Response) => {\r\n          this.recieve(response);\r\n        })\r\n        .catch((e) => {\r\n          alert('Other controlEvent' + e);\r\n        });\r\n    }\r\n  }\r\n\r\n  recieve(response: Response) {\r\n    try {\r\n      const {\r\n        debugState,\r\n        execState,\r\n        output,\r\n        step,\r\n        sourcecode,\r\n        files,\r\n        lastState,\r\n        stepCount,\r\n        linesShowUp,\r\n        allVariables,\r\n        variableShowUp,\r\n        outputChange,\r\n      } = response;\r\n      this.isDebugging = debugState !== 'Stop';\r\n      this.sentSourcecode = sourcecode;\r\n      if (debugState === 'Executing') {\r\n        return;\r\n      }\r\n      if (debugState === 'First') {\r\n        signal('init', stepCount, linesShowUp, allVariables, variableShowUp);\r\n      }\r\n      if (this.controlEvent !== 'JumpTo') {\r\n        signal('changeStep', step);\r\n      }\r\n      signal('changeState', debugState, step);\r\n      signal('changeOutput', output, outputChange);\r\n      signal('draw', execState, lastState);\r\n      signal('files', files);\r\n      this.setHighlightOnCode(debugState, execState);\r\n    } catch (e) {\r\n      alert('recieve: ' + e);\r\n    }\r\n  }\r\n\r\n  setHighlightOnCode(debugState: DEBUG_STATE, execState?: ExecState) {\r\n    if (debugState === 'Stop') {\r\n      return;\r\n    }\r\n    if (typeof execState === 'undefined') {\r\n      return;\r\n    }\r\n    const codeRange = execState.getNextExpr().codeRange;\r\n    const AceRange = this.ace.acequire('ace/range').Range;\r\n    const editor: AceAjax.Editor = this.editorRef.current.editor;\r\n    if (codeRange) {\r\n      const range: AceAjax.Range = new AceRange(\r\n        codeRange.begin.y - 1,\r\n        codeRange.begin.x,\r\n        codeRange.end.y - 1,\r\n        codeRange.end.x\r\n      );\r\n      editor.resize(true);\r\n      // tslint:disable-next-line:no-empty\r\n      editor.scrollToLine(codeRange.begin.y, true, true, () => {});\r\n      if (debugState === 'EOF') {\r\n        editor.getSelection().setSelectionRange(new AceRange(-1, 0, -1, 1));\r\n      } else {\r\n        editor.getSelection().setSelectionRange(range);\r\n      }\r\n    }\r\n  }\r\n\r\n  setSyntaxError(errors: SyntaxErrorData[]) {\r\n    const editor: AceAjax.Editor = this.editorRef.current.editor;\r\n    const annotations = errors.map((error: SyntaxErrorData) => {\r\n      return {\r\n        row: error.line - 1,\r\n        column: error.charPositionInLine - 1,\r\n        text: error.getMsg(),\r\n        type: 'error',\r\n      };\r\n    });\r\n    const session: AceAjax.IEditSession = editor.getSession();\r\n    session.setAnnotations(annotations);\r\n    for (const highlightId of this.highlightIds) {\r\n      session.removeMarker(highlightId);\r\n    }\r\n    this.highlightIds = [];\r\n    for (const annotation of annotations) {\r\n      const range = (session as any).highlightLines(\r\n        annotation.row,\r\n        annotation.row,\r\n        'error_line'\r\n      );\r\n      this.highlightIds.push(range.id);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {this.state.showAlert ? this.renderAlert() : null} {this.renderEditor()}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  renderEditor() {\r\n    const mode = this.props.progLang;\r\n    const { fontSize, theme } = this.state;\r\n    return (\r\n      <AceEditor\r\n        ref={this.editorRef}\r\n        mode={mode}\r\n        theme=\"textmate\"\r\n        value={this.sourcecode}\r\n        name=\"sourcecode\"\r\n        fontSize={fontSize}\r\n        tabSize={2}\r\n        editorProps={{\r\n          $blockScrolling: Infinity,\r\n        }}\r\n        setOptions={{\r\n          enableBasicAutocompletion: true,\r\n          enableLiveAutocompletion: true,\r\n          showLineNumbers: true,\r\n          readOnly: false,\r\n        }}\r\n        style={{ height: '100%', width: '100%' }}\r\n        className=\"editorMain\"\r\n        onChange={(text: string) => {\r\n          this.sourcecode = text;\r\n          const delaySyntaxCheck = (code: string) => {\r\n            if (code === this.sourcecode) {\r\n              signal('debug', 'SyntaxCheck');\r\n            }\r\n          };\r\n          setTimeout(() => delaySyntaxCheck(text), 1000);\r\n        }}\r\n        onBeforeLoad={(ace) => (this.ace = ace)}\r\n      />\r\n    );\r\n  }\r\n\r\n  hideAlert() {\r\n    this.setState({ showAlert: false });\r\n  }\r\n\r\n  renderAlert() {\r\n    const { lang } = this.props;\r\n    const warning = translate(lang, 'warning');\r\n    const editInDebug = translate(lang, 'editInDebug');\r\n    const continueDebug = translate(lang, 'continueDebug');\r\n    const restart = translate(lang, 'restart');\r\n    const rememberCommand = translate(lang, 'rememberCommand');\r\n    return (\r\n      <Modal.Dialog\r\n        className=\"modal-container\"\r\n        aria-labelledby=\"ModalHeader\"\r\n        // animation={true}\r\n        tabIndex={-1}\r\n        role=\"dialog\"\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{warning}</Modal.Title>\r\n        </Modal.Header>\r\n        <Alert bsStyle=\"danger\">\r\n          <p>{editInDebug}</p>\r\n        </Alert>\r\n        <Modal.Footer>\r\n          <Button\r\n            bsStyle=\"danger\"\r\n            onClick={() => {\r\n              this.isDebugging = false;\r\n              if (this.checkbox !== null) {\r\n                this.noAlert = this.checkbox.checked;\r\n              }\r\n              signal('debug', this.preventedCommand);\r\n            }}\r\n          >\r\n            {continueDebug}\r\n          </Button>\r\n          <Button\r\n            onClick={() => {\r\n              this.isDebugging = false;\r\n              if (this.checkbox !== null) {\r\n                this.noAlert = this.checkbox.checked;\r\n              }\r\n              signal('debug', 'Start');\r\n            }}\r\n          >\r\n            {restart}\r\n          </Button>\r\n          <Checkbox\r\n            validationState=\"warning\"\r\n            inputRef={(ref) => (this.checkbox = ref)}\r\n          >\r\n            {rememberCommand}\r\n          </Checkbox>\r\n        </Modal.Footer>\r\n      </Modal.Dialog>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport './style.scss';\r\nimport PanelHeader from '../../components/panelHeader/PanelHeader';\r\nimport Editor from '../../components/editor/Editor';\r\n\r\nfunction EditorPanel() {\r\n  return (\r\n    <div id='EditorPanel' className='panel'>\r\n      <PanelHeader title='Source Editor' />\r\n      <div className='editor-area'>\r\n        <Editor lang='en' progLang='c_cpp'/>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditorPanel;\r\n","import * as React from 'react';\r\n// tslint:disable-next-line:import-name\r\nimport AceEditor from 'react-ace';\r\n\r\nimport 'ace-builds/src-min-noconflict/mode-text';\r\nimport 'ace-builds/src-min-noconflict/theme-textmate';\r\nimport 'ace-builds/src-min-noconflict/theme-monokai';\r\nimport * as d3 from 'd3';\r\n\r\nimport './console.scss';\r\nimport { slot, signal, remove } from '../emitter';\r\nimport { LangProps } from '../Props';\r\nimport { DEBUG_STATE } from '../server';\r\ntype Props = LangProps;\r\n\r\ninterface State {\r\n  output: string;\r\n  isReadOnly: boolean;\r\n  outputChange: boolean;\r\n}\r\n\r\nexport default class Console extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = { output: '', isReadOnly: true, outputChange: false };\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    slot('changeOutput', (output: string, outputChange: boolean) => {\r\n      this.setState({ output, outputChange });\r\n    });\r\n    slot('changeState', async (debugState: DEBUG_STATE) => {\r\n      if (debugState === 'stdin') {\r\n        this.setState({ isReadOnly: false });\r\n      }\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    remove('changeOutput');\r\n    remove('changeState');\r\n  }\r\n\r\n  onChange(text: string) {\r\n    if (text.endsWith('\\n')) {\r\n      const sendText = text.slice(0, -1).replace(this.state.output, '');\r\n      this.setState({ output: text, isReadOnly: true });\r\n      signal('debug', 'Step', sendText);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.state.outputChange) {\r\n      d3.select('#ConsolePanel')\r\n        .transition()\r\n        .duration(1000)\r\n        .tween('number', function () {\r\n          let i = d3.interpolateNumber(8, 16);\r\n          let j = d3.interpolateRgb('#ffffff', '#4A8CE3');\r\n          return function (t) {\r\n            d3.select('#ConsolePanel').style(\r\n              'box-shadow',\r\n              `0px 0px ${i(t)}px ${j(t)}`\r\n            );\r\n          };\r\n        });\r\n      d3.select('#ConsolePanel')\r\n        .transition()\r\n        .delay(1000)\r\n        .duration(1000)\r\n        .tween('number', function () {\r\n          let i = d3.interpolateNumber(16, 8);\r\n          let j = d3.interpolateRgb('#4A8CE3', '#ffffff');\r\n          return function (t) {\r\n            d3.select('#ConsolePanel').style(\r\n              'box-shadow',\r\n              `0px 0px ${i(t)}px ${j(t)}`\r\n            );\r\n          };\r\n        });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <AceEditor\r\n        mode=\"text\"\r\n        theme=\"light\"\r\n        value={this.state.output}\r\n        onChange={this.onChange}\r\n        name=\"IO\"\r\n        fontSize={14}\r\n        editorProps={{ $blockScrolling: true }}\r\n        setOptions={{\r\n          enableBasicAutocompletion: false,\r\n          enableLiveAutocompletion: false,\r\n          showLineNumbers: false,\r\n          readOnly: this.state.isReadOnly,\r\n          showGutter: false,\r\n        }}\r\n        style={{ height: '100%', width: '100%', marginTop: '.25rem' }}\r\n        className=\"console\"\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport './style.scss';\r\nimport Console from '../../components/console/Console';\r\nimport PanelHeader from '../../components/panelHeader/PanelHeader';\r\n\r\nfunction ConsolePanel() {\r\n  return (\r\n    <div id=\"ConsolePanel\" className=\"panel\">\r\n      <PanelHeader title=\"Console\" />\r\n      <div className=\"console-area\">\r\n        <Console lang=\"en\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ConsolePanel;\r\n","import React from 'react';\r\nimport { StatementHighlight } from '../../panels/timelinePanel/TimelinePanel';\r\n\r\ninterface StatementHighlightContentProps {\r\n  // changeStatementColor: (lineNumber: number, color: string) => void;\r\n  // statementHighlights: StatementHighlight[];\r\n  // changeStatementVisible: (lineNumber: number) => void;\r\n}\r\n\r\nfunction StatementHighlightContent(props: StatementHighlightContentProps) {\r\n  return <div>\r\n    \r\n    <div id='StatementHighlightContent'>\r\n      <div className='title'>Hightlight Statements</div>\r\n      <div></div>\r\n    </div>\r\n    </div>;\r\n}\r\n\r\nexport default StatementHighlightContent;\r\n","import React from 'react';\r\ninterface VariableHighlightContentProps {\r\n  // variableHighlights: VariableHighlight[];\r\n  // options: any;\r\n  // addVariableHighlight: (funcName: string, varName: string) => void;\r\n  // changeVariableColor: (funcName: string, varName: string, color: string) => void;\r\n  // changeVariableVisible: (funcName: string, varName: string) => void;\r\n  // removeVariableHighlight: (funcName: string, varName: string) => void;\r\n}\r\n\r\nfunction VariableHighlightContent(props: VariableHighlightContentProps) {\r\n  return (\r\n    <div id=\"VariableHighlightContent\">\r\n      <div className=\"title\">Hightlight Variables</div>\r\n      <div></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VariableHighlightContent;\r\n","import * as React from 'react';\r\nimport { signal } from '../emitter';\r\n\r\ninterface Props {\r\n  step: number;\r\n  max: number;\r\n  scale: any;\r\n  width: number;\r\n  height: number;\r\n  // variableHighlights: VariableHighlight[];\r\n  // statementHighlights: StatementHighlight[];\r\n}\r\ninterface State {\r\n  dragging: boolean;\r\n  dragIndex?: any;\r\n}\r\n\r\nexport default class Slider extends React.Component<Props, State> {\r\n  componentDidMount() {\r\n    window.addEventListener('mouseup', this.dragEnd, false);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('mouseup', this.dragEnd, false);\r\n  }\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      dragging: false,\r\n    };\r\n  }\r\n\r\n  dragStart = (e: any) => {\r\n    e.stopPropagation();\r\n    if (!this.state.dragging) {\r\n      this.setState(\r\n        {\r\n          dragging: true,\r\n        },\r\n        () => {\r\n          this.setState({ dragging: true });\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  dragEnd = (e: any) => {\r\n    e.stopPropagation();\r\n    this.setState(\r\n      {\r\n        dragging: false,\r\n      },\r\n      () => {\r\n        this.setState({ dragging: false });\r\n      }\r\n    );\r\n  };\r\n\r\n  dragFromSVG = (e: React.MouseEvent) => {\r\n    if (this.props.max === 0) return;\r\n    if (!this.state.dragging) {\r\n      let step = this.props.scale.invert(e.nativeEvent.offsetX);\r\n      step = Math.min(step, this.props.max);\r\n      step = Math.max(step, 0);\r\n      step = Math.round(step);\r\n      signal('changeStep', step);\r\n      signal('jumpTo', step);\r\n      this.setState(\r\n        {\r\n          dragging: true,\r\n        },\r\n        () => {\r\n          this.setState({ dragging: true });\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  mouseMove = (e: React.MouseEvent) => {\r\n    if (this.props.max === 0) return;\r\n    if (this.state.dragging) {\r\n      let step = this.props.scale.invert(e.nativeEvent.offsetX);\r\n      step = Math.min(step, this.props.max);\r\n      step = Math.max(step, 0);\r\n      step = Math.round(step);\r\n      signal('changeStep', step);\r\n      signal('jumpTo', step);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      step,\r\n      max,\r\n      scale,\r\n      width,\r\n      height,\r\n      // variableHighlights,\r\n      // statementHighlights,\r\n    } = this.props;\r\n\r\n    // const contenWidth = width > 250 ? width - 60 : width;\r\n    const contentWidth = width;\r\n    const activeWidth = max ? (step / max) * contentWidth : 0;\r\n\r\n    // console.log(contentWidth, activeWidth, step, max);\r\n\r\n    return (\r\n      <div>\r\n        <svg\r\n          style={{\r\n            display: 'block',\r\n            // paddingBottom: '8px',\r\n            zIndex: 6,\r\n            overflow: 'visible',\r\n          }}\r\n          height={height}\r\n          width={contentWidth}\r\n          onMouseDown={this.dragFromSVG}\r\n          onMouseMove={this.mouseMove}\r\n        >\r\n          <rect\r\n            className=\"timeline\"\r\n            height={8}\r\n            x={0}\r\n            y={height / 2 - 4}\r\n            width={contentWidth}\r\n            rx=\"4\"\r\n            ry=\"4\"\r\n          />\r\n          <rect\r\n            className=\"timeline active\"\r\n            height={8}\r\n            x={0}\r\n            y={height / 2 - 4}\r\n            width={activeWidth}\r\n            rx=\"4\"\r\n            ry=\"4\"\r\n          />\r\n\r\n          {/* <g>\r\n          {variableHighlights.map((m) => {\r\n            return (\r\n              <g key={m.funcName + '_' + m.name}>\r\n                {m['steps'].map((_step) => {\r\n                  if (m['visible']) {\r\n                    return (\r\n                      <rect\r\n                        height={30}\r\n                        x={scale(_step) - 1.5}\r\n                        y={18}\r\n                        width={3}\r\n                        fill={m['color']}\r\n                      />\r\n                    );\r\n                  }\r\n                })}\r\n              </g>\r\n            );\r\n          })}\r\n        </g>\r\n        <g>\r\n          {statementHighlights.map((m) => {\r\n            return (\r\n              <g key={m.lineNumber}>\r\n                {m['steps'].map((_step, i) => {\r\n                  if (m['visible']) {\r\n                    let h = 5;\r\n                    if (m['depth'][i] < 5) {\r\n                      h = m['depth'][i] * 7 + h;\r\n                    } else {\r\n                      h = 40;\r\n                    }\r\n                    return (\r\n                      <rect\r\n                        height={h}\r\n                        x={scale(_step) - 1.5}\r\n                        y={52}\r\n                        width={3}\r\n                        fill={m['color']}\r\n                      ></rect>\r\n                    );\r\n                  }\r\n                })}\r\n              </g>\r\n            );\r\n          })}\r\n        </g> */}\r\n          <g>\r\n            <text\r\n              className=\"timeline-legend\"\r\n              x={contentWidth}\r\n              y={height / 2 - 20}\r\n              fontSize=\"15\"\r\n            >\r\n              Variables\r\n            </text>\r\n            <text\r\n              className=\"timeline-legend\"\r\n              x={contentWidth}\r\n              y={height / 2 + 35}\r\n              fontSize=\"15\"\r\n            >\r\n              Statements\r\n            </text>\r\n          </g>\r\n        </svg>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/stepLight.1342c687.svg\";","export default __webpack_public_path__ + \"static/media/stepDark.4b3318fe.svg\";","export default __webpack_public_path__ + \"static/media/stepAllLight.cdcc2be1.svg\";","export default __webpack_public_path__ + \"static/media/stepAllDark.195eaf6f.svg\";","export default __webpack_public_path__ + \"static/media/restartLight.8c265da1.svg\";","export default __webpack_public_path__ + \"static/media/restartDark.bc869dd8.svg\";","export default __webpack_public_path__ + \"static/media/stepBackLight.d6c0cb2a.svg\";","export default __webpack_public_path__ + \"static/media/stepBackDark.4ac60f09.svg\";","export default __webpack_public_path__ + \"static/media/backAllLight.0af11755.svg\";","export default __webpack_public_path__ + \"static/media/backAllDark.b40d3e39.svg\";","export default __webpack_public_path__ + \"static/media/kaishi2.c2674428.svg\";","export default __webpack_public_path__ + \"static/media/kaishi1.7a08fbf8.svg\";","import classNames from 'classnames';\r\nimport React from 'react';\r\nimport './style.scss';\r\n\r\ninterface ControlButtonProps {\r\n  iconHrefLight: string;\r\n  iconHrefDark: string;\r\n  onClick: () => void;\r\n  disabled: boolean;\r\n}\r\n\r\nfunction ControlButton({iconHrefLight, iconHrefDark, onClick, disabled}: ControlButtonProps) {\r\n  return (\r\n    <div\r\n      className={classNames('control-button', {disabled: disabled})}\r\n      onClick={onClick}\r\n    >\r\n      <svg width={40} height={40}>\r\n        <image xlinkHref={disabled ? iconHrefLight : iconHrefDark} height='40' width='40' cursor='pointer' />\r\n      </svg>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ControlButton;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport { DEBUG_STATE } from '../server';\r\nimport { showEvents, signal } from '../emitter';\r\nimport * as d3 from 'd3';\r\n\r\nimport stepLight from '../../assets/icon/stepLight.svg';\r\nimport stepDark from '../../assets/icon/stepDark.svg';\r\nimport stepAllLight from '../../assets/icon/stepAllLight.svg';\r\nimport stepAllDark from '../../assets/icon/stepAllDark.svg';\r\nimport restartLight from '../../assets/icon/restartLight.svg';\r\nimport restartDark from '../../assets/icon/restartDark.svg';\r\n\r\nimport stepBackLight from '../../assets/icon/stepBackLight.svg';\r\nimport stepBackDark from '../../assets/icon/stepBackDark.svg';\r\nimport backAllLight from '../../assets/icon/backAllLight.svg';\r\nimport backAllDark from '../../assets/icon/backAllDark.svg';\r\n\r\nimport startLight from '../../assets/icon/kaishi2.svg';\r\nimport startDark from '../../assets/icon/kaishi1.svg';\r\nimport ControlButton from './ControButton';\r\n\r\nimport './style.scss';\r\n\r\nfunction ControlButtonGroup({ debugState }: { debugState: DEBUG_STATE }) {\r\n  const [start, setStart] = useState(false);\r\n  const [stop, setStop] = useState(false);\r\n  const [backAll, setBackAll] = useState(false);\r\n  const [stepBack, setStepBack] = useState(false);\r\n  const [step, setStep] = useState(true);\r\n  const [stepAll, setStepAll] = useState(false);\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  const onKeyDown = (e: any) => {\r\n    switch (e.keyCode) {\r\n      case 39: {\r\n        // showEvents();\r\n        signal('debug', stop ? 'Step' : 'Start');\r\n        break;\r\n      }\r\n      case 37: {\r\n        signal('debug', 'StepBack');\r\n        break;\r\n      }\r\n    }\r\n    if (e.ctrlKey && e.keyCode === 13) {\r\n      signal('debug', 'Start');\r\n      const arrowListJson = sessionStorage.getItem('arrowList');\r\n      let arrowList = arrowListJson === null ? {} : JSON.parse(arrowListJson);\r\n      if (!arrowList) {\r\n        arrowList = {};\r\n      }\r\n      Object.keys(arrowList).forEach((name) => {\r\n        d3.select('#svg')\r\n          .select(`#block_${name}`)\r\n          .attr('transform', 'matrix(1,0,0,1,0,0)');\r\n      });\r\n      sessionStorage.clear();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    switch (debugState) {\r\n      case 'Stop':\r\n        setStart(true);\r\n        setStop(false);\r\n        setBackAll(false);\r\n        setStepBack(false);\r\n        setStep(false);\r\n        setStepAll(false);\r\n        break;\r\n      case 'First':\r\n        setStart(true);\r\n        setStop(true);\r\n        setBackAll(false);\r\n        setStepBack(false);\r\n        setStep(true);\r\n        setStepAll(true);\r\n        break;\r\n      case 'stdin':\r\n        setBackAll(false);\r\n        setStepBack(false);\r\n        setStep(true);\r\n        setStepAll(true);\r\n        break;\r\n      case 'Debugging':\r\n        setBackAll(true);\r\n        setStepBack(true);\r\n        setStep(true);\r\n        setStepAll(true);\r\n        break;\r\n      case 'Executing':\r\n        setBackAll(false);\r\n        setStepBack(false);\r\n        setStep(false);\r\n        setStepAll(false);\r\n        break;\r\n      case 'EOF':\r\n        setStart(true);\r\n        setStop(true);\r\n        setBackAll(true);\r\n        setStepBack(true);\r\n        setStep(false);\r\n        setStepAll(false);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    window.addEventListener('keyup', onKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keyup', onKeyDown);\r\n    };\r\n  }, [debugState, onKeyDown]);\r\n\r\n  return (\r\n    <div className=\"control-btn-group\">\r\n      <ControlButton\r\n        iconHrefLight={backAllLight}\r\n        iconHrefDark={backAllDark}\r\n        // onClick={() => signal('debug', 'BackAll')}\r\n        onClick={() => {}}\r\n        disabled={!backAll}\r\n      />\r\n      <ControlButton\r\n        iconHrefLight={stepBackLight}\r\n        iconHrefDark={stepBackDark}\r\n        onClick={() => signal('debug', 'StepBack')}\r\n        disabled={!stepBack}\r\n      />\r\n      <ControlButton\r\n        iconHrefLight={stop ? restartLight : startLight}\r\n        iconHrefDark={stop ? restartDark : startDark}\r\n        onClick={() => {\r\n          signal('debug', 'Start');\r\n          const arrowListJson = sessionStorage.getItem('arrowList');\r\n          let arrowList =\r\n            arrowListJson === null ? {} : JSON.parse(arrowListJson);\r\n          if (!arrowList) {\r\n            arrowList = {};\r\n          }\r\n          Object.keys(arrowList).forEach((name) => {\r\n            d3.select('#svg')\r\n              .select(`#block_${name}`)\r\n              .attr('transform', 'matrix(1,0,0,1,0,0)');\r\n          });\r\n          sessionStorage.clear();\r\n        }}\r\n        disabled={!start}\r\n      />\r\n      <ControlButton\r\n        iconHrefLight={stepLight}\r\n        iconHrefDark={stepDark}\r\n        onClick={() => {\r\n          // showEvents();\r\n          signal('debug', stop ? 'Step' : 'Start');\r\n        }}\r\n        disabled={!step}\r\n      />\r\n      <ControlButton\r\n        iconHrefLight={stepAllLight}\r\n        iconHrefDark={stepAllDark}\r\n        onClick={() => signal('debug', stop ? 'StepAll' : 'Exec')}\r\n        disabled={!stepAll}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ControlButtonGroup;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { scaleLinear as linear } from 'd3-scale';\r\nimport PanelHeader from '../../components/panelHeader/PanelHeader';\r\nimport StatementHighlightContent from '../../components/timeline/StatementHighlightContent';\r\nimport VariableHighlightContent from '../../components/timeline/VariableHighlightContent';\r\nimport './style.scss';\r\nimport '../../styles/colors.scss';\r\nimport * as d3 from 'd3';\r\nimport { inArray } from 'jquery';\r\nimport Slider from '../../components/timeline/Slider';\r\nimport ControlButtonGroup from '../../components/timeline/ControlButtonGroup';\r\nimport { DEBUG_STATE } from '../../components/server';\r\nimport { remove, slot } from '../../components/emitter';\r\nimport { unstable_batchedUpdates } from 'react-dom';\r\nimport { Variable } from 'unicoen.ts/dist/interpreter/Engine/Variable';\r\n\r\ninterface OptionItem {\r\n  value: string;\r\n  label: string;\r\n  children: { value: string; label: string }[];\r\n}\r\n\r\nexport interface StatementHighlight {\r\n  color: string;\r\n  lineNumber: number;\r\n  visible: boolean;\r\n  steps: number[];\r\n  depth: number[];\r\n}\r\n\r\nexport interface VariableWithSteps {\r\n  color: string;\r\n  funcName: string;\r\n  name: string;\r\n  visible: boolean;\r\n  steps: number[];\r\n  variable: Variable;\r\n}\r\n\r\ninterface TimelinePanelProps {\r\n  variableShowUps: VariableWithSteps[];\r\n  updVariableShowUps: (variableShowUps: VariableWithSteps[]) => void;\r\n}\r\n\r\nfunction TimelinePanel({ variableShowUps, updVariableShowUps }: TimelinePanelProps) {\r\n  const [max, setMax] = useState(0);\r\n  const [marks, setMarks] = useState({});\r\n  const [step, setStep] = useState(0);\r\n  const [variableHighlights, setVariableHighlights] = useState<\r\n    VariableWithSteps[]\r\n  >([]);\r\n  const [statementHighlights, setStatementHighlights] = useState<\r\n    StatementHighlight[]\r\n  >([]);\r\n  const [options, setOptions] = useState<OptionItem[]>([]);\r\n  const [linesShowUp, setLinesShowUp] = useState<StatementHighlight[]>([]);\r\n  const [debugStatus, setDebugStatus] = useState('');\r\n  const [debugState, setDebugState] = useState<DEBUG_STATE>('Stop');\r\n  const timelineArea = React.createRef<any>();\r\n  const [timelineWidth, setTimelineWidth] = useState(0);\r\n\r\n  useEffect(() => {\r\n    slot('changeStep', (step: number) => {\r\n      setStep(step);\r\n    });\r\n    slot('statementHighlight', (lineNumber: number) => {\r\n      const statement = linesShowUp[lineNumber];\r\n      const color = d3\r\n        .rgb(\r\n          Math.floor(Math.random() * 255),\r\n          Math.floor(Math.random() * 255),\r\n          Math.floor(Math.random() * 255)\r\n        )\r\n        .formatRgb();\r\n      alert(linesShowUp);\r\n      statement.color = color;\r\n      statementHighlights.push(statement);\r\n      setStatementHighlights(statementHighlights);\r\n      d3.selectAll(`.highlight${lineNumber}`).style('background-color', color);\r\n    });\r\n\r\n    slot('cancelStatementHighlight', (lineNumber: number) => {\r\n      for (let i = 0; i < statementHighlights.length; i++) {\r\n        if (statementHighlights[i]['lineNumber'] == lineNumber + 1) {\r\n          statementHighlights.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n      d3.selectAll(`.highlight${lineNumber}`).style('background-color', '#fff');\r\n      setStatementHighlights(statementHighlights);\r\n    });\r\n    slot(\r\n      'init',\r\n      (\r\n        stepCount: number,\r\n        linesShowUp: any,\r\n        allVariables: any,\r\n        variableShowUp: any\r\n      ) => {\r\n        const options: OptionItem[] = [];\r\n        Object.keys(allVariables).forEach((funcName) => {\r\n          const temp: OptionItem = {\r\n            value: funcName,\r\n            label: funcName,\r\n            children: [],\r\n          };\r\n          Object.keys(allVariables[funcName]).forEach((varName) => {\r\n            temp.children.push({\r\n              value: varName,\r\n              label: varName,\r\n            });\r\n          });\r\n          options.push(temp);\r\n        });\r\n        // console.log(variableShowUp);\r\n        unstable_batchedUpdates(() => {\r\n          setMax(stepCount);\r\n          setVariableHighlights([]);\r\n          setStatementHighlights([]);\r\n          setLinesShowUp(linesShowUp);\r\n          updVariableShowUps(variableShowUp);\r\n          setOptions(options);\r\n        });\r\n        updVariableShowUps(variableShowUp);\r\n      }\r\n    );\r\n    slot('changeState', (debugState: DEBUG_STATE, step: number) => {\r\n      let debugStatus = '';\r\n      if (debugState === 'Debugging') {\r\n        debugStatus = `Step ${step}`;\r\n      } else {\r\n        debugStatus = debugState;\r\n      }\r\n      unstable_batchedUpdates(() => {\r\n        setDebugStatus(debugStatus);\r\n        setDebugState(debugState);\r\n      });\r\n    });\r\n\r\n    return () => {\r\n      remove('changeStep');\r\n      remove('statementHighlight');\r\n      remove('cancelStatementHighlight');\r\n      remove('init');\r\n      remove('changeState');\r\n    };\r\n  });\r\n\r\n  const changeStatementColor = (lineNumber: number, color: string) => {\r\n    for (let i = 0; i < statementHighlights.length; i++) {\r\n      if (statementHighlights[i].lineNumber === lineNumber) {\r\n        statementHighlights[i].color = color;\r\n        break;\r\n      }\r\n    }\r\n    d3.selectAll(`.highlight${lineNumber - 1}`).style(\r\n      'background-color',\r\n      color\r\n    );\r\n    setStatementHighlights(statementHighlights);\r\n  };\r\n\r\n  const changeStatementVisible = (lineNumber: number) => {\r\n    const len = statementHighlights.length;\r\n    for (let i = 0; i < len; i++) {\r\n      if (statementHighlights[i].lineNumber === lineNumber) {\r\n        statementHighlights[i].visible = !statementHighlights[i].visible;\r\n        break;\r\n      }\r\n    }\r\n    setStatementHighlights(statementHighlights);\r\n  };\r\n\r\n  const addVariableHighlight = (funcName: string, varName: string) => {\r\n    const color = d3\r\n      .rgb(\r\n        Math.floor(Math.random() * 255),\r\n        Math.floor(Math.random() * 255),\r\n        Math.floor(Math.random() * 255)\r\n      )\r\n      .formatRgb();\r\n    // console.log('addVariableHighlight: ', color);\r\n    let temp = null;\r\n    for (let i = 0; i < variableShowUps.length; i++) {\r\n      if (\r\n        variableShowUps[i].funcName === funcName &&\r\n        variableShowUps[i].name === varName\r\n      ) {\r\n        variableShowUps[i].color = color;\r\n        temp = variableShowUps[i];\r\n        break;\r\n      }\r\n    }\r\n    if (temp === null) {\r\n      alert('Unexcepted Variable');\r\n      return;\r\n    }\r\n    if (inArray(temp, variableHighlights) < 0) {\r\n      variableHighlights.push(temp);\r\n      setVariableHighlights(variableHighlights);\r\n      updVariableShowUps(variableShowUps);\r\n    }\r\n    const memoryCells = d3\r\n      .select('#memory')\r\n      .selectAll(`.memory-${funcName}-${varName}`);\r\n    memoryCells.select('rect').style('stroke', color);\r\n    memoryCells.selectAll('text').attr('fill', color);\r\n    const blockCells = d3\r\n      .select('#svg')\r\n      .selectAll(`.block-${funcName}-${varName}`);\r\n    blockCells.select('rect').style('stroke', color);\r\n    blockCells.selectAll('text').attr('fill', color);\r\n  };\r\n\r\n  const removeVariableHighlight = (funcName: string, varName: string) => {\r\n    for (let i = 0; i < variableShowUps.length; i++) {\r\n      if (\r\n        variableShowUps[i].funcName === funcName &&\r\n        variableShowUps[i].name === varName\r\n      ) {\r\n        variableShowUps[i].visible = true;\r\n        break;\r\n      }\r\n    }\r\n    for (let i = 0; i < variableHighlights.length; i++) {\r\n      for (let j = 0; j < variableHighlights.length; j++) {\r\n        if (\r\n          variableHighlights[j].funcName === funcName &&\r\n          variableHighlights[j].funcName === varName\r\n        ) {\r\n          variableHighlights.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    const memoryCells = d3\r\n      .select('#memory')\r\n      .selectAll(`.memory-${funcName}-${varName}`);\r\n    memoryCells.select('rect').style('stroke', 'black');\r\n    memoryCells.selectAll('text').attr('fill', 'black');\r\n    const blockCells = d3\r\n      .select('#svg')\r\n      .selectAll(`.block-${funcName}-${varName}`);\r\n    blockCells.select('rect').style('stroke', 'black');\r\n    blockCells.selectAll('text').attr('fill', 'black');\r\n\r\n    setVariableHighlights(variableHighlights);\r\n    updVariableShowUps(variableShowUps);\r\n  };\r\n\r\n  const changeVariableColor = (\r\n    funcName: string,\r\n    varName: string,\r\n    color: string\r\n  ) => {\r\n    let i = 0;\r\n    for (; i < variableShowUps.length; i++) {\r\n      if (\r\n        variableShowUps[i].funcName === funcName &&\r\n        variableShowUps[i].name === varName\r\n      ) {\r\n        variableShowUps[i].color = color;\r\n        break;\r\n      }\r\n    }\r\n    for (let j = 0; j < variableHighlights.length; j++) {\r\n      if (\r\n        variableHighlights[j].funcName === funcName &&\r\n        variableHighlights[j].name === varName\r\n      ) {\r\n        variableHighlights[j].color = color;\r\n        break;\r\n      }\r\n    }\r\n    const memoryCells = d3\r\n      .select('#memory')\r\n      .selectAll(`.memory-${funcName}-${varName}`);\r\n    memoryCells.select('rect').style('stroke', color);\r\n    memoryCells.selectAll('text').attr('fill', color);\r\n    const blockCells = d3\r\n      .select('#svg')\r\n      .selectAll(`.block-${funcName}-${varName}`);\r\n    blockCells.select('rect').style('stroke', color);\r\n    blockCells.selectAll('text').attr('fill', color);\r\n\r\n    setVariableHighlights(variableHighlights);\r\n    updVariableShowUps(variableShowUps);\r\n  };\r\n\r\n  const changeVariableVisible = (funcName: string, varName: string) => {\r\n    for (let i = 0; i < variableShowUps.length; i++) {\r\n      if (\r\n        variableShowUps[i].funcName === funcName &&\r\n        variableShowUps[i]['name'] === varName\r\n      ) {\r\n        if (variableShowUps[i]['visible']) {\r\n          const memoryCells = d3\r\n            .select('#memory')\r\n            .selectAll(`.memory-${funcName}-${varName}`);\r\n          memoryCells.select('rect').style('stroke', 'black');\r\n          memoryCells.selectAll('text').attr('fill', 'black');\r\n          const blockCells = d3\r\n            .select('#svg')\r\n            .selectAll(`.block-${funcName}-${varName}`);\r\n          blockCells.select('rect').style('stroke', 'black');\r\n          blockCells.selectAll('text').attr('fill', 'black');\r\n        } else {\r\n          const memoryCells = d3\r\n            .select('#memory')\r\n            .selectAll(`.memory-${funcName}-${varName}`);\r\n          memoryCells\r\n            .select('rect')\r\n            .style('stroke', variableShowUps[i]['color']);\r\n          memoryCells\r\n            .selectAll('text')\r\n            .attr('fill', variableShowUps[i]['color']);\r\n          const blockCells = d3\r\n            .select('#svg')\r\n            .selectAll(`.block-${funcName}-${varName}`);\r\n          blockCells.select('rect').style('stroke', variableShowUps[i]['color']);\r\n          blockCells.selectAll('text').attr('fill', variableShowUps[i]['color']);\r\n        }\r\n        variableShowUps[i]['visible'] = !variableShowUps[i]['visible'];\r\n        break;\r\n      }\r\n    }\r\n\r\n    setVariableHighlights(variableHighlights);\r\n    updVariableShowUps(variableShowUps);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setTimelineWidth(timelineArea.current.clientWidth - 60);\r\n  }, [timelineArea]);\r\n\r\n  return (\r\n    <div id=\"TimelinePanel\" className=\"panel\">\r\n      <PanelHeader title=\"Timeline\" />\r\n      <div className=\"main-content\">\r\n        <div className=\"col-1\">\r\n          <StatementHighlightContent\r\n          // changeStatementColor={changeStatementColor}\r\n          // statementHighlights={statementHighlights}\r\n          // changeStatementVisible={changeStatementVisible}\r\n          />\r\n        </div>\r\n        <div className=\"col-2\" ref={timelineArea}>\r\n          <div className=\"row-1\">\r\n            <Slider\r\n              step={step}\r\n              max={max}\r\n              scale={linear().domain([0, max]).range([0, timelineWidth])}\r\n              width={timelineWidth}\r\n              height={8}\r\n              // variableHighlights={variableHighlights}\r\n              // statementHighlights={statementHighlights}\r\n            />\r\n          </div>\r\n          <div className=\"row-2\">\r\n            <ControlButtonGroup debugState={debugState} />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-3\">\r\n          <VariableHighlightContent\r\n          // variableHighlights={variableHighlights}\r\n          // options={options}\r\n          // addVariableHighlight={addVariableHighlight}\r\n          // changeVariableColor={changeVariableColor}\r\n          // changeVariableVisible={changeVariableVisible}\r\n          // removeVariableHighlight={removeVariableHighlight}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TimelinePanel;\r\n","import { ExecState } from 'unicoen.ts/dist/interpreter/Engine/ExecState';\r\nimport { Stack } from 'unicoen.ts/dist/interpreter/Engine/Stack';\r\nimport { Variable } from 'unicoen.ts/dist/interpreter/Engine/Variable';\r\nimport { Vector } from 'vector2d';\r\n\r\nexport type BlockCellContainer = BlockCell[];\r\nexport type BlockTable = BlockCellContainer[];\r\n\r\nexport function arrayToString(value: number | any[], type: string) {\r\n  const array = valueToArray(value, type);\r\n  if (Array.isArray(value)) {\r\n    if (\r\n      (type.startsWith('char') || type.startsWith('unsignedchar')) &&\r\n      type.split('[').length === 2\r\n    ) {\r\n      return '\"' + array.toString() + '\"';\r\n    }\r\n    return '[' + array.toString() + ']';\r\n  }\r\n  return array.toString();\r\n}\r\n\r\nexport function valueToArray(value: number | any[], type: string) {\r\n  const res: string[] = [];\r\n  if (Array.isArray(value)) {\r\n    value.forEach((v) => {\r\n      res.push(arrayToString(v.value, v.type));\r\n    });\r\n  } else {\r\n    if (type === 'char' || type === 'unsignedchar') {\r\n      return typeof value === undefined || value === 0\r\n        ? ''\r\n        : String.fromCharCode(value);\r\n    } else {\r\n      return value ? value : 0;\r\n    }\r\n  }\r\n  if (\r\n    (type.startsWith('char') || type.startsWith('unsignedchar')) &&\r\n    type.split('[').length === 2\r\n  ) {\r\n    return [res.join('')];\r\n  }\r\n  return res;\r\n}\r\n\r\nexport class BlockDrawer {\r\n  private blockStacks: BlockStack[] = [];\r\n  private blockArrows: any = [null, null];\r\n  private execState: ExecState | null = null;\r\n  constructor(execState?: ExecState) {\r\n    if (typeof execState === 'undefined') return;\r\n    this.execState = execState;\r\n    this.reset();\r\n    this.update();\r\n    this.calcPos();\r\n  }\r\n  private reset() {\r\n    this.blockStacks = [];\r\n  }\r\n\r\n  private update() {\r\n    if (this.execState === null) return;\r\n    const stacks = this.execState.getStacks();\r\n    stacks.forEach((stack, i) => {\r\n      if (stack.name !== 'GLOBAL') {\r\n        const blockStack = new BlockStack(stack);\r\n        blockStack.setColor('#979797');\r\n        this.blockStacks.push(blockStack);\r\n      }\r\n    });\r\n  }\r\n\r\n  private calcPos() {\r\n    const originX = 300;\r\n    const originY = 5;\r\n    const offsetX = 40;\r\n    const offsetY = 40;\r\n    const x = originX;\r\n    let y = originY;\r\n    this.blockStacks.slice(-2).forEach((blockStack, index) => {\r\n      this.blockArrows[index] = blockStack.getName();\r\n      const height = this.calcStackPos(x, y, blockStack);\r\n      y += height + offsetY;\r\n    });\r\n\r\n    this.blockStacks.slice(0, -2).forEach((blockStack, index) => {\r\n      this.calcStackPos(0, 0, blockStack);\r\n    });\r\n  }\r\n\r\n  private calcStackPos(x: number, y: number, blockStack: BlockStack) {\r\n    blockStack.setPos(x, y);\r\n    const offsetX = 20;\r\n    const offsetY = 40;\r\n    const originX = x + offsetX;\r\n    const originY = y + 20;\r\n    let row = 1;\r\n    let count = 0;\r\n    const blockTable = blockStack.getBlockTable();\r\n    blockTable.forEach((blockCellContainer) => {\r\n      const len = 1;\r\n      if (count + len > 2) {\r\n        row++;\r\n        count = 0;\r\n      }\r\n      const _x = originX + (offsetX + BlockCell.WIDTH) * count + offsetX;\r\n      const _y =\r\n        originY + (offsetY + BlockCell.HEIGHT) * row - BlockCell.HEIGHT;\r\n      this.calcVariablePos(_x, _y, blockCellContainer);\r\n      count += len;\r\n    });\r\n    blockStack.setHeight((BlockCell.HEIGHT + offsetY) * row + offsetY * 2);\r\n    blockStack.setWidth((BlockCell.WIDTH + offsetX) * 2 + offsetX * 3);\r\n\r\n    return (BlockCell.HEIGHT + offsetY) * row + offsetY * 2;\r\n  }\r\n\r\n  private calcVariablePos(\r\n    x: number,\r\n    y: number,\r\n    blockCellContainer: BlockCellContainer\r\n  ) {\r\n    const offsetX = 20 + BlockCell.WIDTH;\r\n    blockCellContainer[0].setPos(x, y);\r\n  }\r\n\r\n  // private calcVariablePos(\r\n  //   x: number,\r\n  //   y: number,\r\n  //   blockCellContainer: BlockCellContainer\r\n  // ) {\r\n  //   const offsetX = 20 + BlockCell.WIDTH;\r\n  //   if (blockCellContainer.length === 1) {\r\n  //     blockCellContainer[0].setPos(x, y);\r\n  //   } else {\r\n  //     blockCellContainer[0].setPos(x - 10, y - 10);\r\n  //     blockCellContainer[0].setWidth(\r\n  //       offsetX * Math.min(getCellsByDepth(blockCellContainer, 1).length, 3)\r\n  //     );\r\n  //     blockCellContainer[0].setHeight(BlockCell.HEIGHT + 20);\r\n  //     const depth = getDepth(blockCellContainer);\r\n  //     for (let i = 1; i <= depth; i++) {\r\n  //       const blockCells = getCellsByDepth(blockCellContainer, i);\r\n  //       blockCells.forEach((blockCell) => {});\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  public getBlockStacks() {\r\n    return this.blockStacks;\r\n  }\r\n\r\n  public getBlockArrows() {\r\n    return this.blockArrows;\r\n  }\r\n\r\n  public addBlockStack(blockStack: BlockStack) {\r\n    this.blockStacks.push(blockStack);\r\n  }\r\n\r\n  public addArrow(stackName: any) {\r\n    this.blockArrows.push(stackName);\r\n  }\r\n}\r\n\r\nexport class BlockStack {\r\n  public readonly key: string;\r\n  private pos: Vector = new Vector(0, 0);\r\n  private blockTable: BlockTable;\r\n  private stack: Stack;\r\n  private width = 0;\r\n  private height = 0;\r\n  private color: string | undefined;\r\n\r\n  constructor(stack: Stack) {\r\n    this.stack = stack;\r\n    this.blockTable = this.makeBlockTable();\r\n    this.key = stack.name;\r\n  }\r\n\r\n  public setPos(x: number, y: number) {\r\n    this.pos.setAxes(x, y);\r\n  }\r\n\r\n  public setWidth(width: number) {\r\n    this.width = width;\r\n  }\r\n\r\n  public setHeight(height: number) {\r\n    this.height = height;\r\n  }\r\n\r\n  public setColor(color: string) {\r\n    this.color = color;\r\n  }\r\n\r\n  private makeBlockTable(): BlockTable {\r\n    const blockTable: BlockTable = [];\r\n    const variables = this.stack.getVariables();\r\n    const stackName = this.stack.name;\r\n    variables.forEach((variable) => {\r\n      const value = variable.getValue();\r\n      const isArrayVariable = Array.isArray(value);\r\n      const blockVariable = isArrayVariable\r\n        ? new BlockArrayVariable(variable, stackName)\r\n        : new BlockVariable(variable, stackName);\r\n      const cellss = blockVariable.getBlockCellContainer();\r\n      blockTable.push(cellss);\r\n    });\r\n    return blockTable;\r\n  }\r\n\r\n  public getBlockTable() {\r\n    return this.blockTable;\r\n  }\r\n\r\n  public x() {\r\n    return this.pos.getX();\r\n  }\r\n\r\n  public y() {\r\n    return this.pos.getY();\r\n  }\r\n\r\n  public getWidth() {\r\n    return this.width;\r\n  }\r\n\r\n  public getHeight() {\r\n    return this.height;\r\n  }\r\n\r\n  public getName() {\r\n    const res = this.key.replace(/[&|\\\\*:^%$@()[\\].]/g, '_');\r\n    return res;\r\n  }\r\n\r\n  public getColor() {\r\n    return this.color;\r\n  }\r\n}\r\n\r\nexport class BlockVariable {\r\n  public readonly key: string;\r\n  protected blockCellContainer: BlockCellContainer = [];\r\n  protected readonly variable: Variable;\r\n  protected readonly stackName: string;\r\n  constructor(variable: Variable, stackName: string) {\r\n    this.variable = variable;\r\n    this.stackName = stackName;\r\n    this.key = `${stackName}-${variable.name}`;\r\n    this.key = this.key.replace(/[&|\\\\*:^%$@()[\\].]/g, '_');\r\n    this.init();\r\n  }\r\n\r\n  protected init() {\r\n    const { type, name, address } = this.variable;\r\n    const cell = this.pushCell(name, this.variable.getValue());\r\n    cell.setType(type);\r\n    cell.setAddress(address);\r\n  }\r\n\r\n  protected pushCell(name: string, value: any): BlockCell {\r\n    const cell = new BlockCell(name, this.key, value);\r\n    this.blockCellContainer.push(cell);\r\n    return cell;\r\n  }\r\n\r\n  public getBlockCellContainer(): BlockCellContainer {\r\n    return this.blockCellContainer;\r\n  }\r\n}\r\n\r\nexport class BlockArrayVariable extends BlockVariable {\r\n  constructor(variable: Variable, stackName: string) {\r\n    super(variable, stackName);\r\n  }\r\n\r\n  public getBlockCellContainer(): BlockCellContainer {\r\n    const children: BlockCellContainer = [];\r\n    const value: Variable[] = this.variable.getValue();\r\n    for (const v of value) {\r\n      const blockVariable = Array.isArray(v.getValue())\r\n        ? new BlockArrayVariable(v, this.stackName)\r\n        : new BlockVariable(v, this.stackName);\r\n      const table = blockVariable.getBlockCellContainer();\r\n      children.push(...table);\r\n    }\r\n    return this.blockCellContainer.concat(children);\r\n  }\r\n}\r\n\r\nexport class BlockCell {\r\n  public static readonly FONT_SIZE: number = 20;\r\n  public static readonly HEIGHT: number = 50;\r\n  public static readonly WIDTH: number = 150;\r\n  private address: number | undefined;\r\n  public readonly key: string;\r\n  private type: string | undefined;\r\n  private name: string;\r\n  private pos: Vector = new Vector(-1, -1);\r\n  private value: any;\r\n  private depth = 0;\r\n  private width: number = BlockCell.WIDTH;\r\n  private height: number = BlockCell.HEIGHT;\r\n  constructor(name: string, parentKey: string, value: any) {\r\n    this.name = name;\r\n    this.key = parentKey;\r\n    this.key = this.key.replace(/[&|\\\\*:^%$@()[\\].]/g, '_');\r\n    this.value = value;\r\n    this.depth = this.name.split('[').length - 1;\r\n  }\r\n\r\n  public setAddress(address: number) {\r\n    this.address = address;\r\n  }\r\n\r\n  public setType(type: string) {\r\n    this.type = type;\r\n  }\r\n\r\n  public setPos(x: number, y: number) {\r\n    this.pos.setAxes(x, y);\r\n  }\r\n\r\n  public setWidth(width: number) {\r\n    this.width = width;\r\n  }\r\n\r\n  public setHeight(height: number) {\r\n    this.height = height;\r\n  }\r\n\r\n  public getAddress() {\r\n    return this.address;\r\n  }\r\n\r\n  public getType() {\r\n    return this.type;\r\n  }\r\n\r\n  public getName() {\r\n    return this.name;\r\n  }\r\n\r\n  public x() {\r\n    return this.pos.getX();\r\n  }\r\n\r\n  public y() {\r\n    return this.pos.getY();\r\n  }\r\n\r\n  public getValue() {\r\n    if (this.type!.split('[').length > 1) {\r\n      return arrayToString(this.value, this.type!.split('[')[0]);\r\n    }\r\n\r\n    return this.value.toString();\r\n  }\r\n\r\n  public getDepth() {\r\n    return this.depth;\r\n  }\r\n\r\n  public getWidth() {\r\n    return this.width;\r\n  }\r\n\r\n  public getHeight() {\r\n    return this.height;\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { BlockStack, BlockCell } from '../blockDrawer/BlockDrawer';\r\nimport * as d3 from 'd3';\r\n\r\ninterface Props {\r\n  blockStack: BlockStack;\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\r\ninterface State {}\r\n\r\nexport function wrapWord(\r\n  text: d3.Selection<d3.BaseType, unknown, HTMLElement, any>,\r\n  width: number,\r\n  className:\r\n    | string\r\n    | number\r\n    | boolean\r\n    | d3.ValueFn<SVGTSpanElement, unknown, string | number | boolean | null>\r\n    | null\r\n) {\r\n  text.each(function () {\r\n    const text = d3.select(this),\r\n      words = text.text().split('').reverse();\r\n    let word;\r\n    const line = [],\r\n      x = text.attr('x'),\r\n      y = text.attr('y'),\r\n      tspan = text\r\n        .text(null)\r\n        .append('tspan')\r\n        .attr('class', className)\r\n        .attr('x', x)\r\n        .attr('y', y);\r\n    while ((word = words.pop())) {\r\n      line.push(word);\r\n      tspan.text(line.join(''));\r\n      if (tspan.node()!.getComputedTextLength() > width) {\r\n        line.pop();\r\n        line.splice(line.length - 2, 3, '.', '.', '.');\r\n        tspan.text(line.join(''));\r\n        break;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport default class Block extends React.Component<Props, State> {\r\n  componentDidUpdate() {\r\n    wrapWord(d3.selectAll('.value'), BlockCell.WIDTH - 10, 'value');\r\n  }\r\n\r\n  renderBlockBackground() {\r\n    const { blockStack } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <rect\r\n          x={blockStack.x()}\r\n          y={blockStack.y()}\r\n          width={blockStack.getWidth()}\r\n          height={blockStack.getHeight()}\r\n          rx={10}\r\n          ry={10}\r\n          fill=\"white\"\r\n          style={{ stroke: '#979797', strokeWidth: '1.5px' }}\r\n        ></rect>\r\n        <g className=\"block-left\"></g>\r\n        {/* <path\r\n          d={\r\n            'M ' +\r\n            blockStack.x() +\r\n            ' ' +\r\n            (blockStack.y() + 10) +\r\n            ' L ' +\r\n            blockStack.x() +\r\n            ' ' +\r\n            (blockStack.y() + blockStack.getHeight() - 10) +\r\n            ' A 10 10 0 0 0 ' +\r\n            (blockStack.x() + 10) +\r\n            ' ' +\r\n            (blockStack.y() + blockStack.getHeight()) +\r\n            ' L ' +\r\n            (blockStack.x() + 10) +\r\n            ' ' +\r\n            blockStack.y() +\r\n            ' A 10 10 0 0 0 ' +\r\n            blockStack.x() +\r\n            ' ' +\r\n            (blockStack.y() + 10)\r\n          }\r\n          fill=\"black\"\r\n          stroke=\"black\"\r\n          strokeWidth={2}\r\n        /> */}\r\n        <text\r\n          x={blockStack.x() + 15}\r\n          y={blockStack.y() + BlockCell.FONT_SIZE + 7}\r\n          fontSize={BlockCell.FONT_SIZE + 2}\r\n          fill={blockStack.getColor()}\r\n          className=\"function-name\"\r\n        >\r\n          {blockStack.key.split('.')[0]}\r\n        </text>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  renderBlockContent() {\r\n    const { blockStack } = this.props;\r\n    const list: JSX.Element[] = [];\r\n    const blockTable = blockStack.getBlockTable();\r\n    blockTable.forEach((blockCellContainer) => {\r\n      for (let i = 0; i < 1; i++) {\r\n        if (i >= 3) break;\r\n        const blockCell = blockCellContainer[i];\r\n        list.push(\r\n          <g\r\n            className={`block-${\r\n              blockStack.key.split('.')[0]\r\n            }-${blockCell.getName()}`}\r\n            id={`block-${blockStack.key.replace(\r\n              '.',\r\n              '_'\r\n            )}-${blockCell.getName()}`}\r\n            key={`block-${blockStack.key.replace(\r\n              '.',\r\n              '_'\r\n            )}-${blockCell.getName()}`}\r\n            transform=\"matrix(1,0,0,1,0,0)\"\r\n          >\r\n            <text\r\n              x={blockCell.x() + 5}\r\n              y={blockCell.y() - 5}\r\n              fontSize={BlockCell.FONT_SIZE}\r\n              fontWeight=\"blod\"\r\n              fill={blockStack.getColor()}\r\n              className=\"variable-name\"\r\n            >\r\n              {blockCell.getName()}\r\n            </text>\r\n            <rect\r\n              x={blockCell.x()}\r\n              y={blockCell.y()}\r\n              width={blockCell.getWidth()}\r\n              height={blockCell.getHeight()}\r\n              fill=\"white\"\r\n              style={{ stroke: blockStack.getColor(), strokeWidth: '1.5px' }}\r\n            />\r\n            <text\r\n              className=\"value variable-value\"\r\n              x={blockCell.x() + 10}\r\n              y={blockCell.y() + BlockCell.FONT_SIZE + 10}\r\n              fontSize={BlockCell.FONT_SIZE}\r\n              fill={blockStack.getColor()}\r\n            >\r\n              {blockCell.getValue()}\r\n            </text>\r\n          </g>\r\n        );\r\n      }\r\n    });\r\n    return list;\r\n  }\r\n\r\n  render() {\r\n    const backgroud = this.renderBlockBackground();\r\n    const content = this.renderBlockContent();\r\n    return (\r\n      <g\r\n        className=\"block\"\r\n        transform=\"matrix(1,0,0,1,0,0)\"\r\n        id={`block_${this.props.blockStack.getName()}`}\r\n      >\r\n        {backgroud}\r\n        {content}\r\n      </g>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { BlockDrawer, BlockStack } from './/blockDrawer/BlockDrawer';\r\nimport Block from './block/Block';\r\nimport * as d3 from 'd3';\r\nimport { inArray } from 'jquery';\r\nimport { select, Selection } from 'd3-selection';\r\nimport 'd3-clone';\r\n\r\ninterface Props {\r\n  blockDrawer: BlockDrawer;\r\n}\r\n\r\ninterface State {\r\n  blockStacks: BlockStack[];\r\n}\r\n\r\n// function dragged(d: any) {\r\n//   const temp = d3.select(this).attr('id').split('_');\r\n//   temp.shift();\r\n//   const stackName = temp.join('_');\r\n//   d3.select(this).attr('transform', function () {\r\n//     let source = this.attributes.transform.value.replace(')', '');\r\n//     source = source.split(',');\r\n//     const tx = d.dx + Number(source[4]);\r\n//     const ty = d.dy + Number(source[5]);\r\n//     return 'matrix(1,0,0,1,' + tx + ',' + ty + ')';\r\n//   });\r\n//   d3.select('#svg').select(`#arrow_${stackName}`).remove();\r\n//   renderArrow(stackName, stackName);\r\n// }\r\n\r\nexport function renderArrow(sourceStackName: string, targetStackName: string) {\r\n  d3.select('#svg').select(`#arrow_${sourceStackName}`).remove();\r\n  const source = d3\r\n    .select('#svg')\r\n    .select(`#stack_${sourceStackName}`)\r\n    .select('rect');\r\n  let target = d3.select('#svg').select(`#block_${targetStackName}`);\r\n  if (target.empty()) {\r\n    return;\r\n  }\r\n  const sourceX =\r\n    Number(source.attr('x')) +\r\n    Number(source.attr('width')) -\r\n    0.36 * 0.2 * Number(source.attr('height'));\r\n  const sourceY =\r\n    Number(source.attr('y')) + 0.2 * Number(source.attr('height'));\r\n  const transform = target.attr('transform').replace(')', '').split(',');\r\n  target = target.select('rect');\r\n  const targetX = Number(target.attr('x')) + Number(transform[4]);\r\n  const height = d3\r\n    .select(target as any)\r\n    .node()\r\n    .node()\r\n    .getBBox().height;\r\n  const targetY = Number(target.attr('y')) + Number(transform[5]) + height / 2;\r\n  let temp = sourceX - targetX;\r\n  temp = Math.max(temp, -temp);\r\n  d3.select('#svg')\r\n    .select('#path')\r\n    .append('path')\r\n    .attr('style', 'stroke:#858585; fill:none; stroke-width:2;')\r\n    .attr('id', `arrow_${sourceStackName}`)\r\n    .attr(\r\n      'd',\r\n      'M' +\r\n        sourceX +\r\n        ',' +\r\n        sourceY +\r\n        ' C' +\r\n        (targetX - temp / 3) +\r\n        ',' +\r\n        sourceY +\r\n        ' ' +\r\n        (sourceX + temp / 3) +\r\n        ',' +\r\n        targetY +\r\n        ' ' +\r\n        targetX +\r\n        ',' +\r\n        targetY\r\n    )\r\n    .attr('marker-end', 'url(#end)')\r\n    .attr('marker-start', 'url(#start)');\r\n}\r\n\r\nexport default class CallStack extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      blockStacks: props.blockDrawer.getBlockStacks(),\r\n    };\r\n    const arrowListJson = sessionStorage.getItem('arrowList');\r\n    let arrowList = JSON.parse(arrowListJson!);\r\n    props.blockDrawer.getBlockArrows().forEach((name: string | number) => {\r\n      if (!arrowList) {\r\n        arrowList = {};\r\n      }\r\n      if (name) {\r\n        arrowList[name] = '';\r\n      }\r\n    });\r\n    sessionStorage.setItem('arrowList', JSON.stringify(arrowList));\r\n  }\r\n\r\n  componentWillUpdate(nextProps: {\r\n    blockDrawer: { getBlockStacks: () => any; getBlockArrows: () => any[] };\r\n  }) {\r\n    d3.select('#stack__cloned').remove();\r\n    d3.select('#block__cloned').remove();\r\n    d3.select('#arrow__cloned').remove();\r\n    const blockStacks = this.props.blockDrawer.getBlockStacks();\r\n    const nextBlockStacks = nextProps.blockDrawer.getBlockStacks();\r\n\r\n    if (sessionStorage.getItem('exec') !== 'step') {\r\n      const blockStacksLen = blockStacks.length;\r\n      const nextBlockStacksLen = nextBlockStacks.length;\r\n      if (blockStacksLen > nextBlockStacksLen) {\r\n        for (let i = nextBlockStacksLen; i < blockStacksLen; i++) {\r\n          const clonedStack = (\r\n            d3.select('#svg').select('#clone') as any\r\n          ).appendClone(\r\n            d3.select('#stack_' + blockStacks[i].key.replace('.', '_'))\r\n          );\r\n          clonedStack.attr('id', 'stack__cloned');\r\n          const clonedBlock = (\r\n            d3.select('#svg').select('#clone') as any\r\n          ).appendClone(\r\n            d3.select('#block_' + blockStacks[i].key.replace('.', '_'))\r\n          );\r\n          clonedBlock.select('rect').style('stroke', '#979797');\r\n          clonedBlock.select('text').style('fill', '#979797');\r\n          let offsetY = 0;\r\n          if (i > 1) {\r\n            offsetY = blockStacks[i].getHeight() + 40;\r\n          }\r\n          clonedBlock.selectAll('rect').attr('y', function (this: any) {\r\n            return Number(d3.select(this).attr('y')) + offsetY;\r\n          });\r\n          clonedBlock.selectAll('text').attr('y', function (this: any) {\r\n            return Number(d3.select(this).attr('y')) + offsetY;\r\n          });\r\n          clonedBlock.selectAll('tspan').attr('y', function (this: any) {\r\n            return Number(d3.select(this).attr('y')) + offsetY;\r\n          });\r\n          const block = d3.select(\r\n            '#block_' + blockStacks[i].key.replace('.', '_')\r\n          );\r\n          clonedBlock.attr('id', 'block__cloned');\r\n          const list: string[] = [];\r\n          block.selectAll('g').attr('copy', function () {\r\n            return list.push(d3.select(this).attr('id'));\r\n          });\r\n          clonedBlock.selectAll('g').attr('id', function (d: any, i: number) {\r\n            return 'cloned-' + list[i];\r\n          });\r\n        }\r\n      } else if (nextBlockStacksLen > blockStacksLen && blockStacksLen >= 2) {\r\n        const clonedBlock = (\r\n          d3.select('#svg').select('#clone') as any\r\n        ).appendClone(\r\n          d3.select(\r\n            '#block_' + blockStacks[blockStacksLen - 2].key.replace('.', '_')\r\n          )\r\n        );\r\n        clonedBlock.attr('id', 'block__cloned');\r\n      }\r\n    }\r\n    const arrowListJson = sessionStorage.getItem('arrowList');\r\n    let arrowList = JSON.parse(arrowListJson!);\r\n    if (!arrowList) {\r\n      arrowList = {};\r\n    }\r\n    nextProps.blockDrawer.getBlockArrows().forEach((name) => {\r\n      if (inArray(name, Object.keys(arrowList)) >= 0) {\r\n        delete arrowList[name];\r\n        d3.select('#svg')\r\n          .select(`#block_${name}`)\r\n          .attr('transform', 'matrix(1,0,0,1,0,0)');\r\n      }\r\n    });\r\n    sessionStorage.setItem('arrowList', JSON.stringify(arrowList));\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    d3.select('#svg').selectAll('.block-left').selectAll('path').remove();\r\n    d3.select('#svg')\r\n      .selectAll('.block-left')\r\n      .append('path')\r\n      .attr('d', function (this: any) {\r\n        const block_node = d3\r\n          .select(this.parentNode.parentNode)\r\n          .node()\r\n          .getBBox();\r\n        const x = block_node.x;\r\n        const y = block_node.y;\r\n        const height = block_node.height;\r\n        return (\r\n          'M ' +\r\n          x +\r\n          ' ' +\r\n          (y + 10) +\r\n          ' L ' +\r\n          x +\r\n          ' ' +\r\n          (y + height - 10) +\r\n          ' A 10 10 0 0 0 ' +\r\n          (x + 10) +\r\n          ' ' +\r\n          (y + height) +\r\n          ' L ' +\r\n          (x + 10) +\r\n          ' ' +\r\n          y +\r\n          ' A 10 10 0 0 0 ' +\r\n          x +\r\n          ' ' +\r\n          (y + 10)\r\n        );\r\n      });\r\n    // d3.select('#svg').selectAll('.block').call(d3.drag().on('drag', dragged));\r\n    d3.select('#svg').select('#path').selectAll('path').remove();\r\n\r\n    const { blockDrawer } = this.props;\r\n    const blockArrows = blockDrawer.getBlockArrows();\r\n    blockArrows.forEach((stackName: string) => {\r\n      if (!d3.select('#svg').select(`#block_${stackName}`).empty()) {\r\n        renderArrow(stackName, stackName);\r\n      }\r\n    });\r\n    const arrowListJson = sessionStorage.getItem('arrowList');\r\n    let arrowList = JSON.parse(arrowListJson!);\r\n    if (!arrowList) {\r\n      arrowList = {};\r\n    }\r\n    Object.keys(arrowList).forEach((stackName) => {\r\n      if (!d3.select('#svg').select(`#block_${stackName}`).empty()) {\r\n        renderArrow(stackName, stackName);\r\n      }\r\n    });\r\n    // const variablesMapJson = sessionStorage.getItem('variablesMap');\r\n    // let variablesMap = JSON.parse(variablesMapJson!);\r\n    // if (!variablesMap) {\r\n    //   variablesMap = {};\r\n    // }\r\n    // Object.keys(variablesMap).forEach((key) => {\r\n    //   if (variablesMap[key]['visible']) {\r\n    //     const stackName = key.split('_')[0];\r\n    //     const name = key.split('_')[1];\r\n    //     const cells = d3\r\n    //       .select('#svg')\r\n    //       .selectAll(`.block-${stackName}-${name}`);\r\n    //     cells.select('rect').style('stroke', variablesMap[key]['color']);\r\n    //     cells.selectAll('text').attr('fill', variablesMap[key]['color']);\r\n    //   }\r\n    // });\r\n    const activeStack = sessionStorage.getItem('activeStack');\r\n    const blocks = d3.select('#svg').selectAll('.block');\r\n    blocks.select('rect').style('stroke', '#979797');\r\n    blocks.select('text').style('fill', '#979797');\r\n    // const block = d3.select('#svg').select('#block_' + activeStack);\r\n    // block.select('rect').style('stroke', '#0074D9');\r\n    // block.select('text').style('fill', '#0074D9');\r\n  }\r\n\r\n  renderBlocks() {\r\n    const { blockDrawer } = this.props;\r\n    const blockStacks = blockDrawer.getBlockStacks();\r\n    const blockArrows = blockDrawer.getBlockArrows();\r\n    const arrowListJson = sessionStorage.getItem('arrowList');\r\n    let arrowList = JSON.parse(arrowListJson!);\r\n    if (!arrowList) {\r\n      arrowList = {};\r\n    }\r\n    const list: JSX.Element[] = [];\r\n    blockStacks.forEach((blockStack) => {\r\n      if (\r\n        inArray(blockStack.getName(), blockArrows) >= 0 ||\r\n        inArray(blockStack.getName(), Object.keys(arrowList)) >= 0\r\n      ) {\r\n        list.push(\r\n          <g key={blockStack.key}>\r\n            <Block blockStack={blockStack} />\r\n          </g>\r\n        );\r\n      }\r\n    });\r\n    // list  main \r\n    return list;\r\n  }\r\n\r\n  drawOrRemoveBlock(name: string) {\r\n    const arrowListJson = sessionStorage.getItem('arrowList');\r\n    let arrowList = JSON.parse(arrowListJson!);\r\n    if (!arrowList) {\r\n      arrowList = {};\r\n    }\r\n    if (inArray(name, Object.keys(arrowList)) < 0) {\r\n      arrowList[name] = '';\r\n    } else {\r\n      delete arrowList[name];\r\n    }\r\n    sessionStorage.setItem('arrowList', JSON.stringify(arrowList));\r\n    this.setState({});\r\n  }\r\n\r\n  renderStackView() {\r\n    const arrowListJson = sessionStorage.getItem('arrowList');\r\n    let arrowList = JSON.parse(arrowListJson!);\r\n    if (!arrowList) {\r\n      arrowList = {};\r\n    }\r\n    const { blockDrawer } = this.props;\r\n    const blockStacks = blockDrawer.getBlockStacks();\r\n    const blockArrows = blockDrawer.getBlockArrows();\r\n    const list: JSX.Element[] = [];\r\n    const x = 60;\r\n    let y = 50;\r\n    const offsetY = 60;\r\n    const width = 192;\r\n    const height = 108;\r\n    blockStacks.forEach((blockStack, i) => {\r\n      const transform = `matrix(1,0,-0.36,1,0,0)`;\r\n      list.push(\r\n        <g\r\n          key={`stack_${blockStack.getName()}`}\r\n          id={`stack_${blockStack.getName()}`}\r\n          onClick={() => {\r\n            const res = inArray(blockStack.getName(), blockArrows);\r\n            if (res < 0) {\r\n              this.drawOrRemoveBlock(blockStack.getName());\r\n            }\r\n          }}\r\n        >\r\n          <rect\r\n            x={x}\r\n            y={y}\r\n            width={width}\r\n            height={height}\r\n            transform={transform}\r\n            fill=\"white\"\r\n            stroke=\"#979797\"\r\n            strokeWidth={2}\r\n            transform-origin={x + ' ' + y}\r\n          ></rect>\r\n          <text\r\n            x={x + 10}\r\n            y={y + 20}\r\n            fontSize=\"15\"\r\n            className=\"function-name\"\r\n            fill={'rgb(139, 139, 139)' }\r\n          >\r\n            {blockStack.getName().split('_')[0]}\r\n          </text>\r\n        </g>\r\n      );\r\n      y = y + offsetY;\r\n    });\r\n    return list;\r\n  }\r\n\r\n  render() {\r\n    const stacks = this.renderStackView();\r\n    const blocks = this.renderBlocks();\r\n    const { blockDrawer } = this.props;\r\n    const blockArrows = blockDrawer.getBlockArrows();\r\n    blockArrows.forEach((stackName: string) => {\r\n      if (stackName) {\r\n        sessionStorage.setItem('activeStack', stackName);\r\n      }\r\n    });\r\n    return (\r\n      <React.Fragment>\r\n        {stacks}\r\n        {blocks}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","import { ExecState } from 'unicoen.ts/dist/interpreter/Engine/ExecState';\r\nimport { Stack } from 'unicoen.ts/dist/interpreter/Engine/Stack';\r\nimport { UniVariableDef } from 'unicoen.ts/dist/node/UniVariableDef';\r\nimport { arrayToString } from '../blockDrawer/BlockDrawer';\r\nimport { inArray } from 'jquery';\r\n\r\nexport class AnimationDrawer {\r\n  private execState: ExecState | undefined = undefined;\r\n  private lastState: ExecState | undefined = undefined;\r\n  private state!: string;\r\n  private variableKeys!: string[];\r\n  private variableTypes!: string[];\r\n  private variableValues!: any[];\r\n  private postArgs!: any[];\r\n  private stack: Stack | undefined = undefined;\r\n  constructor(execState?: ExecState, lastState?: ExecState) {\r\n    if (typeof execState === 'undefined') return;\r\n    this.execState = execState;\r\n    if (typeof lastState === 'undefined') return;\r\n    this.lastState = lastState;\r\n    this.reset();\r\n    this.getCurrentStack();\r\n    this.parseExe();\r\n  }\r\n\r\n  public reset() {\r\n    this.state = '';\r\n    this.stack = undefined;\r\n    this.postArgs = [];\r\n    this.variableKeys = [];\r\n    this.variableTypes = [];\r\n    this.variableValues = [];\r\n  }\r\n\r\n  private parseExe() {\r\n    const currentExpr = this.execState!.getCurrentExpr();\r\n    const currentClassName = currentExpr.constructor.name;\r\n    let lastClassName = '';\r\n    let lastExpr = undefined;\r\n    let flag = true;\r\n    if (this.lastState) {\r\n      if (\r\n        this.execState!.getStacks().length < this.lastState.getStacks().length\r\n      ) {\r\n        // flag = false;\r\n      }\r\n      lastExpr = this.lastState.getNextExpr();\r\n      lastClassName = lastExpr.constructor.name;\r\n    }\r\n    if (flag) {\r\n      switch (currentClassName) {\r\n        case 'UniProgram':\r\n          this.state = 'programInit';\r\n          break;\r\n        case 'UniVariableDec':\r\n          this.state = 'variablesInit';\r\n          this.variableDec(currentExpr);\r\n          break;\r\n        case 'UniMethodCall':\r\n          this.methodCall(currentExpr);\r\n          break;\r\n        case 'UniBinOp':\r\n          this.binOp(currentExpr);\r\n          break;\r\n      }\r\n      switch (lastClassName) {\r\n        case 'UniBinOp':\r\n          this.binOp(lastExpr);\r\n          break;\r\n        case 'UniReturn':\r\n          this.state = 'uniReturn';\r\n          this.uniReturn(lastExpr);\r\n          break;\r\n        case 'UniVariableDec':\r\n          this.variableKeys = [];\r\n          this.variableTypes = [];\r\n          this.variableValues = [];\r\n          this.state = 'variablesInit';\r\n          this.variableDec(lastExpr);\r\n          break;\r\n      }\r\n    }\r\n    console.log(this);\r\n  }\r\n\r\n  public binOp(uniBinOp: any) {\r\n    const operator = uniBinOp.operator;\r\n    const right = uniBinOp.right;\r\n    const rightClassName = right.constructor.name;\r\n    switch (rightClassName) {\r\n      case 'UniMethodCall':\r\n        this.methodCall(right);\r\n        break;\r\n      case 'UniBinOp':\r\n        this.binOp(right);\r\n        break;\r\n    }\r\n    if (operator !== '=') {\r\n      const left = uniBinOp.left;\r\n      const leftClassName = left.constructor.name;\r\n      switch (leftClassName) {\r\n        case 'UniMethodCall':\r\n          this.methodCall(left);\r\n          break;\r\n        case 'UniBinOp':\r\n          this.binOp(left);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  public methodCall(uniMethodCall: any) {\r\n    const methodName = uniMethodCall.methodName.name;\r\n    this.execState!.getStacks().forEach((stack) => {\r\n      if (methodName === stack.name) {\r\n        this.state = 'methodCall';\r\n        this.postArgs = [];\r\n        this.getMethodArgs(uniMethodCall);\r\n        return;\r\n      }\r\n    });\r\n    this.lastState!.getStacks().forEach((stack) => {\r\n      if (methodName === stack.name) {\r\n        this.state = 'methodCall';\r\n        this.postArgs = [];\r\n        this.getMethodArgs(uniMethodCall);\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  public variableDec(uniVariableDec: any) {\r\n    const variables = uniVariableDec.variables;\r\n    if (variables) {\r\n      variables.forEach((variable: UniVariableDef) => {\r\n        this.variableDef(variable);\r\n      });\r\n    }\r\n  }\r\n\r\n  public variableDef(uniVariableDef: UniVariableDef) {\r\n    let key = this.stack!.name + '-' + uniVariableDef.name;\r\n    key = key.replace(/[&\\|\\\\\\*:^%$@()\\[\\].]/g, '_');\r\n    const variableValue = uniVariableDef.value;\r\n    if (!variableValue) return;\r\n    const valueClass = variableValue.constructor.name;\r\n    switch (valueClass) {\r\n      case 'UniMethodCall':\r\n        this.methodCall(variableValue);\r\n        break;\r\n      case 'UniBinOp':\r\n        this.binOp(variableValue);\r\n        break;\r\n    }\r\n    const variables = this.stack!.getVariables();\r\n    for (let i = 0; i < variables.length; i++) {\r\n      if (variables[i].getName() === uniVariableDef.name) {\r\n        const type = variables[i].type;\r\n        const value = variables[i].getValue();\r\n        this.variableKeys.push(key);\r\n        this.variableTypes.push(type);\r\n        if (type.split('[').length > 1) {\r\n          this.variableValues.push(arrayToString(value, type.split('[')[0]));\r\n        } else {\r\n          if (inArray(type.split('[')[0], ['char', 'unsignedchar']) < 0) {\r\n            this.variableValues.push(value);\r\n          } else {\r\n            this.variableValues.push(String.fromCharCode(value));\r\n          }\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  public uniReturn(uniReturn: any) {\r\n    const currentExpr = this.execState!.getCurrentExpr();\r\n    const currentClassName = currentExpr.constructor.name;\r\n    // if (currentClassName !== 'UniVariableDec') {\r\n    //   return;\r\n    // }\r\n    const returnValue = uniReturn.value;\r\n    if (!returnValue) {\r\n      return;\r\n    }\r\n    this.postArgs = [];\r\n    this.travelValue(returnValue);\r\n    // this.variableDec(currentExpr);\r\n  }\r\n\r\n  private travelValue(returnValue: any) {\r\n    let returnValueClass = returnValue.constructor.name;\r\n    if (returnValueClass === 'UniIdent') {\r\n      this.postArgs.push(\r\n        (\r\n          this.lastState!.getStacks()[this.lastState!.getStacks().length - 1]\r\n            .name +\r\n          '-' +\r\n          returnValue.name\r\n        ).replace(/[&\\|\\\\\\*:^%$@()\\[\\].]/g, '_')\r\n      );\r\n      return;\r\n    } else if (returnValueClass === 'UniBinOp') {\r\n      this.travelValue(returnValue.left);\r\n      this.travelValue(returnValue.right);\r\n    }\r\n  }\r\n\r\n  private travelArg(arg: any, idx: number) {\r\n    let returnValueClass = arg.constructor.name;\r\n    if (this.postArgs.length === idx) {\r\n      this.postArgs.push(undefined);\r\n    }\r\n    if (returnValueClass === 'UniIdent') {\r\n      if (this.postArgs[idx] === undefined) {\r\n        this.postArgs[idx] = (\r\n          this.lastState!.getStacks()[this.lastState!.getStacks().length - 1]\r\n            .name +\r\n          '-' +\r\n          arg.name\r\n        ).replace(/[&\\|\\\\\\*:^%$@()\\[\\].]/g, '_');\r\n      }\r\n      return;\r\n    } else if (returnValueClass === 'UniBinOp') {\r\n      this.travelArg(arg.left, idx);\r\n      this.travelArg(arg.right, idx);\r\n    }\r\n  }\r\n\r\n  public getMethodArgs(uniMethodCall: any) {\r\n    const args = uniMethodCall.args;\r\n    const variables = this.stack!.getVariables();\r\n    args.forEach((arg: any, idx: number) => {\r\n      this.travelArg(arg, idx);\r\n      const type = variables[idx].type;\r\n      const value = variables[idx].getValue();\r\n      this.variableKeys.push(\r\n        (this.stack!.name + '-' + variables[idx].name).replace(\r\n          /[&\\|\\\\\\*:^%$@()\\[\\].]/g,\r\n          '_'\r\n        )\r\n      );\r\n      this.variableTypes.push(type);\r\n      if (type.split('[').length > 1) {\r\n        this.variableValues.push(arrayToString(value, type.split('[')[0]));\r\n      } else {\r\n        if (inArray(type.split('[')[0], ['char', 'unsignedchar']) < 0) {\r\n          this.variableValues.push(value);\r\n        } else {\r\n          this.variableValues.push(String.fromCharCode(value));\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  public getCurrentStack() {\r\n    const stacks = this.execState!.getStacks();\r\n    const stack = stacks[stacks.length - 1];\r\n    this.stack = stack;\r\n    return stack;\r\n  }\r\n\r\n  public getState() {\r\n    return this.state;\r\n  }\r\n\r\n  public getVariableKeys() {\r\n    return this.variableKeys;\r\n  }\r\n\r\n  public getVariableTypes() {\r\n    return this.variableTypes;\r\n  }\r\n\r\n  public getVariableValues() {\r\n    return this.variableValues;\r\n  }\r\n\r\n  public getStackName() {\r\n    if (this.stack) {\r\n      let res = this.stack.name.replace(/[&\\|\\\\\\*:^%$@()\\[\\].]/g, '_');\r\n      return res;\r\n    }\r\n    return '';\r\n  }\r\n\r\n  public getStacks() {\r\n    if (this.execState) {\r\n      return this.execState.getStacks();\r\n    }\r\n    return [];\r\n  }\r\n\r\n  public getPostArgs() {\r\n    return this.postArgs;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PanelHeader from '../../components/panelHeader/PanelHeader';\r\nimport CallStack from '../../components/callStack/CallStack';\r\nimport Animation from '../../components/callStack/animation/Animation';\r\nimport { AnimationDrawer } from '../../components/callStack/animation/AnimationDrawer';\r\nimport { slot, remove } from '../../components/emitter';\r\nimport { ExecState } from 'unicoen.ts/dist/interpreter/Engine/ExecState';\r\nimport { BlockDrawer } from '../../components/callStack/blockDrawer/BlockDrawer';\r\n\r\nimport './style.scss';\r\nimport { VariableWithSteps } from '../timelinePanel/TimelinePanel';\r\nimport { Variable } from 'unicoen.ts/dist/interpreter/Engine/Variable';\r\nimport * as d3 from 'd3';\r\n\r\ninterface Props {\r\n  height: number;\r\n  width: number;\r\n  execState?: ExecState;\r\n  lastState?: ExecState;\r\n  variableShowUps: VariableWithSteps[] | undefined;\r\n}\r\ninterface State {}\r\n\r\nclass CallStackPanel extends React.Component<Props, State> {\r\n  componentDidUpdate() {\r\n    const variableShowUps = this.props.variableShowUps;\r\n    const execState = this.props.execState;\r\n    const lastState = this.props.lastState;\r\n    if (lastState && execState && variableShowUps) {\r\n      variableShowUps.forEach((variableWithSteps) => {\r\n        if (variableChanged(variableWithSteps, lastState, execState)) {\r\n          // console.log(\r\n          //   'CHANGE|' +\r\n          //     variableWithSteps.funcName +\r\n          //     ': ' +\r\n          //     variableWithSteps.name\r\n          // );\r\n          highlightChangedVariable(\r\n            variableWithSteps.funcName,\r\n            variableWithSteps.name\r\n          );\r\n        } else {\r\n          resetVariableColor(\r\n            variableWithSteps.funcName,\r\n            variableWithSteps.name\r\n          );\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // console.log('render1');\r\n    const blockDrawer = new BlockDrawer(this.props.execState);\r\n    const animationDrawer = new AnimationDrawer(\r\n      this.props.execState,\r\n      this.props.lastState\r\n    );\r\n    // console.log('render2');\r\n    return (\r\n      <div id=\"CallStackPanel\" className=\"panel\">\r\n        <PanelHeader title=\"Call Stack\" />\r\n        <div className=\"callStack-area\">\r\n          {/* {console.log('DEBUG|'+this.props.execState)} */}\r\n          <svg\r\n            id=\"svg\"\r\n            width={this.props.width - 20}\r\n            height={this.props.height * 0.75 - 28 - 39.2}\r\n          >\r\n            <marker\r\n              id=\"end\"\r\n              viewBox=\"-10 -10 20 20\"\r\n              refX=\"0\"\r\n              refY=\"0\"\r\n              markerWidth=\"8\"\r\n              markerHeight=\"8\"\r\n              orient=\"auto\"\r\n            >\r\n              <circle\r\n                cx={0}\r\n                cy={0}\r\n                style={{ stroke: '#483647', strokeWidth: 2, fill: 'white' }}\r\n                r={8}\r\n              ></circle>\r\n            </marker>\r\n            <marker\r\n              id=\"start\"\r\n              viewBox=\"-10 -10 20 20\"\r\n              refX=\"0\"\r\n              refY=\"0\"\r\n              markerWidth=\"8\"\r\n              markerHeight=\"8\"\r\n              orient=\"auto\"\r\n            >\r\n              <circle\r\n                cx={0}\r\n                cy={0}\r\n                style={{ stroke: '#979797', strokeWidth: 2, fill: 'white' }}\r\n                r={8}\r\n              ></circle>\r\n            </marker>\r\n            <CallStack blockDrawer={blockDrawer}></CallStack>\r\n            <g id=\"clone\"></g>\r\n            <g id=\"path\"></g>\r\n          </svg>\r\n          {/* <Animation\r\n            animationDrawer={\r\n              new AnimationDrawer(this.props.execState, this.props.lastState)\r\n            }\r\n          ></Animation> */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CallStackPanel;\r\n\r\nconst variableChanged = (\r\n  variableWithSteps: VariableWithSteps,\r\n  lastState: ExecState,\r\n  execState: ExecState\r\n) => {\r\n  const stackName = variableWithSteps.funcName;\r\n  const variable = variableWithSteps.variable;\r\n  const lastStacks = lastState.getStacks();\r\n  const execStacks = execState.getStacks();\r\n  let lastValue: any = undefined;\r\n  let curValue: any = undefined;\r\n  lastStacks.forEach((stack) => {\r\n    if (stackName !== stack.name) return;\r\n    // console.log('FIND');\r\n    // console.log(variable);\r\n    // console.log(stack.getVariables());\r\n    lastValue = getValueFromStack(variable, stack.getVariables());\r\n    // console.log('GOT');\r\n    // console.log(lastValue);\r\n    if (lastValue !== undefined) return;\r\n  });\r\n  execStacks.forEach((stack) => {\r\n    if (stackName !== stack.name) return;\r\n    curValue = getValueFromStack(variable, stack.getVariables());\r\n    if (curValue !== undefined) return;\r\n  });\r\n  // console.log('last| ' + lastStacks);\r\n  // console.log('exec| ' + execStacks);\r\n  // console.log(\r\n  //   'VC| find ' +\r\n  //     stackName +\r\n  //     ' | ' +\r\n  //     variableWithSteps.name +\r\n  //     ' last: ' +\r\n  //     lastValue +\r\n  //     ' cur: ' +\r\n  //     curValue\r\n  // );\r\n  // console.log(lastValue, curValue);\r\n  // console.log(\r\n  //   lastValue !== undefined,\r\n  //   curValue !== undefined,\r\n  //   lastValue === curValue,\r\n  //   lastValue !== curValue,\r\n  // );\r\n  return (\r\n    lastValue !== undefined &&\r\n    curValue !== undefined &&\r\n    lastValue.toString() !== curValue.toString()\r\n  );\r\n};\r\n\r\nconst getValueFromStack = (targetVariable: Variable, variables: Variable[]) => {\r\n  let ret = undefined;\r\n  variables.forEach((variable) => {\r\n    const value = variable.getValue();\r\n    if (value instanceof Array) {\r\n      const v = getValueFromStack(targetVariable, value);\r\n      if (v !== undefined) {\r\n        return v;\r\n      }\r\n    } else {\r\n      // console.log('CMP');\r\n      // console.log(targetVariable.address);\r\n      // console.log(variable.address);\r\n      if (targetVariable.address === variable.address) {\r\n        ret = value;\r\n        return;\r\n      }\r\n    }\r\n  });\r\n  return ret;\r\n};\r\n\r\nconst highlightChangedVariable = (funcName: string, varName: string) => {\r\n  const blockElement = d3.select('#block-' + funcName + '-' + varName);\r\n  const highlightColor = 'rgb(74, 140, 227)';\r\n\r\n  blockElement.select('.variable-name').attr('fill', highlightColor);\r\n  blockElement.select('.variable-value').attr('fill', highlightColor);\r\n  blockElement.select('rect').attr('style', 'stroke: ' + highlightColor);\r\n};\r\n\r\nconst resetVariableColor = (funcName: string, varName: string) => {\r\n  const defaultColor = 'rgb(139, 139, 139)';\r\n  const blockElement = d3.select('#block-' + funcName + '-' + varName);\r\n\r\n  blockElement.select('.variable-name').attr('fill', defaultColor);\r\n  blockElement.select('.variable-value').attr('fill', defaultColor);\r\n  blockElement.select('rect').attr('style', 'stroke: ' + defaultColor);\r\n};\r\n","import classNames from 'classnames';\r\nimport React from 'react';\r\nimport { Variable } from 'unicoen.ts/dist/interpreter/Engine/Variable';\r\nimport './style.scss';\r\n\r\nexport interface MemoryCellProps {\r\n  variable: Variable;\r\n  selectedVar: Variable | undefined;\r\n  handleClick: (variable: Variable) => void;\r\n}\r\n\r\nfunction MemoryCell({ variable, selectedVar, handleClick }: MemoryCellProps) {\r\n  const varName = variable.name;\r\n  const dataType = variable.type;\r\n  const address = variable.address;\r\n\r\n  const getValue = () => {\r\n    const value = variable.getValue();\r\n    if (dataType === 'char') {\r\n      return \"'\" + value.toString() + \"'\";\r\n    }\r\n    if (value instanceof Array) {\r\n      const fv = firstVarInArr(value);\r\n      return '0x' + fv.address.toString(16);\r\n    }\r\n    return value.toString();\r\n  };\r\n\r\n  return dataType[-1] !== ']' ? (\r\n    <div\r\n      className={classNames('memory-cell', {\r\n        active: selectedVar?.address === address,\r\n        'in-heap': varName === '',\r\n      })}\r\n      onClick={() => {\r\n        handleClick(variable);\r\n      }}\r\n    >\r\n      <div className=\"col-name variable-name\">{varName}</div>\r\n      <div className=\"col-value\">\r\n        <div className=\"col-1\">{dataType}</div>\r\n        <div className=\"col-2\">{getValue()}</div>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <div></div>\r\n  );\r\n}\r\n\r\nexport default MemoryCell;\r\n\r\nfunction firstVarInArr(arr: Array<Variable>) {\r\n  while (arr[0].getValue() instanceof Array) {\r\n    arr = arr[0].getValue();\r\n  }\r\n  return arr[0];\r\n}\r\n","import React from 'react';\r\nimport { Variable } from 'unicoen.ts/dist/interpreter/Engine/Variable';\r\nimport MemoryCell from './MemoryCell';\r\nimport './style.scss';\r\n\r\ninterface MemoryBlockProps {\r\n  funcName: string;\r\n  variables: Variable[];\r\n  selectedVar: Variable | undefined;\r\n  handleClick: (variable: Variable) => void;\r\n  // memoryCells: {varName: string; dataType: string; value: string}[];\r\n}\r\n\r\nfunction MemoryBlock({\r\n  funcName,\r\n  variables,\r\n  selectedVar,\r\n  handleClick,\r\n}: MemoryBlockProps) {\r\n  return (\r\n    <div className=\"memory-block\">\r\n      <div className=\"highlight-bar\"></div>\r\n      <div className=\"main-content\">\r\n        <div className=\"function-name\">{funcName}</div>\r\n        <div className=\"cells\">\r\n          {variables.map((variable) => {\r\n            const value = variable.getValue();\r\n\r\n            return value instanceof Array ? (\r\n              <MemoryCell\r\n                key={variable.name}\r\n                variable={variable}\r\n                selectedVar={selectedVar}\r\n                handleClick={handleClick}\r\n              />\r\n            ) : (\r\n              <MemoryCell\r\n                key={variable.name}\r\n                variable={variable}\r\n                selectedVar={selectedVar}\r\n                handleClick={handleClick}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MemoryBlock;\r\n","import { type } from 'os';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { ExecState } from 'unicoen.ts/dist/interpreter/Engine/ExecState';\r\nimport { Stack } from 'unicoen.ts/dist/interpreter/Engine/Stack';\r\nimport { Variable } from 'unicoen.ts/dist/interpreter/Engine/Variable';\r\nimport MemoryBlock from './memoryBlock/MemoryBlock';\r\nimport MemoryCell, { MemoryCellProps } from './memoryBlock/MemoryCell';\r\n\r\nimport './style.scss';\r\n\r\ninterface LogicalViewProps {\r\n  execState: ExecState | undefined;\r\n  selectedVar: Variable | undefined;\r\n  handleClick: (variable: Variable) => void;\r\n}\r\n\r\nconst example_var0 = new Variable('int', '', -1, 10008, 2);\r\nconst example_var1 = new Variable('int', '', 2100000000, 10000, 2);\r\nconst example_var2 = new Variable('int', 'a', -2, 10004, 2);\r\nconst example_var3 = new Variable('int', 'b', 10, 10006, 2);\r\nconst example_var4 = new Variable('char', 'c', 'c', 10010, 2);\r\n\r\nfunction LogicalView({\r\n  execState,\r\n  selectedVar,\r\n  handleClick,\r\n}: LogicalViewProps) {\r\n  const [allStacks, setAllStacks] = useState<Stack[]>([]);\r\n  const [heap, setHeap] = useState<Variable[]>([]);\r\n  const [global, setGlobal] = useState<Variable[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (execState !== undefined) {\r\n      const stacks = execState.getStacks();\r\n      const curStacks: Stack[] = [];\r\n      const curHeap: Variable[] = [];\r\n      const curGlobal: Variable[] = [];\r\n\r\n      // console.log('DEBUG| Stacks: ' + stacks);\r\n\r\n      stacks.forEach((stack) => {\r\n        if (stack.name !== 'GLOBAL') {\r\n          curStacks.push(stack);\r\n        } else {\r\n          const variables = stack.getVariables();\r\n          variables.forEach((variable) => {\r\n            if (variable.address >= 50000) {\r\n              curGlobal.push(variable);\r\n            } else if (variable.address >= 20000) {\r\n              curHeap.push(variable);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      setAllStacks(curStacks);\r\n      setHeap(curHeap);\r\n      setGlobal(curGlobal);\r\n    }\r\n  }, [execState]);\r\n\r\n  return (\r\n    <div id=\"LogicalView\">\r\n      <div className='left-content'>\r\n      <div id=\"StackView\" className=\"content-view\">\r\n        <div className=\"title\"> Stack</div>\r\n        <div className=\"content\">\r\n          {allStacks.map((stack) => {\r\n            const p = stack.name.indexOf('.');\r\n            const stackName = p > 0 ? stack.name.substring(0, p) : stack.name;\r\n            return (\r\n              <MemoryBlock\r\n                key={stack.name}\r\n                funcName={stackName}\r\n                variables={stack.getVariables()}\r\n                selectedVar={selectedVar}\r\n                handleClick={handleClick}\r\n              />\r\n            );\r\n          })}\r\n          {/* <MemoryBlock funcName=\"functionX\" memoryCells={memoryCells} /> */}\r\n        </div>\r\n      </div></div>\r\n      <div className='right-content'>\r\n        <div id=\"HeapView\" className=\"content-view\">\r\n          <div className=\"title\">Heap</div>\r\n          <div className=\"content\">\r\n            {/* <MemoryCell\r\n              variable={example_var1}\r\n              selectedVar={selectedVar}\r\n              handleClick={handleClick}\r\n            />\r\n            <MemoryCell\r\n              variable={example_var0}\r\n              selectedVar={selectedVar}\r\n              handleClick={handleClick}\r\n            /> */}\r\n          </div>\r\n        </div>\r\n        <div id=\"GlobalStaticView\" className=\"content-view\">\r\n          <div className=\"title\">Global / Static</div>\r\n          <div className=\"content\">\r\n            {/* <div style={{border: '1px solid black', height: '2rem'}}></div> */}\r\n            {/* <MemoryCell\r\n              variable={example_var2}\r\n              selectedVar={selectedVar}\r\n              handleClick={handleClick}\r\n            />\r\n            <MemoryCell\r\n              variable={example_var3}\r\n              selectedVar={selectedVar}\r\n              handleClick={handleClick}\r\n            />\r\n            <MemoryCell\r\n              variable={example_var4}\r\n              selectedVar={selectedVar}\r\n              handleClick={handleClick}\r\n            /> */}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LogicalView;\r\n","import React, { useEffect } from 'react';\r\nimport { Variable } from 'unicoen.ts/dist/interpreter/Engine/Variable';\r\nimport './style.scss';\r\n\r\nexport interface MemoryInfo {\r\n  funcName: string;\r\n  varName: string;\r\n  address: string;\r\n  type: string;\r\n  value: string;\r\n  binaryCode0: string;\r\n  binaryCode1: string;\r\n  binaryCode2: string;\r\n}\r\n\r\nconst defaultMemoryInfo: MemoryInfo = {\r\n  funcName: 'X',\r\n  varName: 'X',\r\n  address: 'X',\r\n  type: 'X',\r\n  value: 'X',\r\n  binaryCode0: 'X',\r\n  binaryCode1: 'X',\r\n  binaryCode2: 'X',\r\n};\r\n\r\ninterface MemoryDetailProps {\r\n  variable: Variable;\r\n}\r\n\r\nfunction MemoryDetail({ variable }: MemoryDetailProps) {\r\n  const memoryInfo: MemoryInfo = variable.address > 0\r\n    ? {\r\n        funcName: 'main',\r\n        varName: variable.name,\r\n        address: '0x' + variable.address.toString(16),\r\n        type: variable.type,\r\n        value: variable.getValue().toString(),\r\n        binaryCode0: signMagn(variable),\r\n        binaryCode1: oneComp(variable),\r\n        binaryCode2: twoComp(variable),\r\n      }\r\n    : defaultMemoryInfo;\r\n// console.log('DEBUG|'+variable.address);\r\n  return (\r\n    <div id=\"MemoryDetail\">\r\n      <div>\r\n        <div className=\"detail-item\"></div>\r\n        <div className=\"detail-item\">\r\n          <div className=\"item-name\">Function Name</div>\r\n          <div className=\"item-value\">{memoryInfo.funcName}</div>\r\n        </div>\r\n        <div className=\"detail-item\">\r\n          <div className=\"item-name\">Variable Name</div>\r\n          <div className=\"item-value variable-name\">{memoryInfo.varName}</div>\r\n        </div>\r\n        <div className=\"detail-item\">\r\n          <div className=\"item-name\">Address</div>\r\n          <div className=\"item-value\">{memoryInfo.address}</div>\r\n        </div>\r\n        <div className=\"type-value-detail\">\r\n          <div className=\"detail-item dashed-border-right\">\r\n            <div className=\"item-name\">Type</div>\r\n            <div className=\"item-value\">{memoryInfo.type}</div>\r\n          </div>\r\n          <div className=\"detail-item\">\r\n            <div className=\"item-name\">Value</div>\r\n            <div className=\"item-value\">{memoryInfo.value}</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"detail-item binary-item\">\r\n          <div className=\"item-name\">Sign-Magnitude</div>\r\n          {/* <div className=\"item-name\">Sign-Magn</div> */}\r\n          <div className=\"item-value binary-code\">{memoryInfo.binaryCode0}</div>\r\n        </div>\r\n        <div className=\"detail-item binary-item\">\r\n          <div className=\"item-name\">One's Complement</div>\r\n          {/* <div className=\"item-name\">1's Comp</div> */}\r\n          <div className=\"item-value binary-code\">{memoryInfo.binaryCode1}</div>\r\n        </div>\r\n        <div className=\"detail-item binary-item\">\r\n          <div className=\"item-name\">Two's Complement</div>\r\n          <div className=\"item-value binary-code\">{memoryInfo.binaryCode2}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MemoryDetail;\r\n\r\nfunction twoComp(variable: Variable) {\r\n  if (variable.type === 'int') {\r\n    const num = variable.getValue();\r\n    if (num >= 0) return signMagn(variable);\r\n    const oneC = oneComp(variable);\r\n    const twoC = '1' + d2b(parseInt(oneC, 2) + 1, 31);\r\n    return twoC;\r\n  }\r\n  return 'X';\r\n}\r\n\r\nfunction d2b(num: number, width: number) {\r\n  return (Array(width).join('0') + num.toString(2))\r\n    .slice(-width)\r\n    .replace('-', '0');\r\n}\r\n\r\nfunction signMagn(variable: Variable) {\r\n  if (variable.type === 'int') {\r\n    const num = variable.getValue();\r\n    const binary = d2b(num, 31);\r\n    return (num >= 0 ? '0' : '1') + binary;\r\n  }\r\n  return 'X';\r\n}\r\n\r\nfunction oneComp(variable: Variable) {\r\n  if (variable.type === 'int') {\r\n    const num = variable.getValue();\r\n\r\n    if (num >= 0) {\r\n      return signMagn(variable);\r\n    }\r\n\r\n    const binary = d2b(num, 31);\r\n    const reg = /1|0/g;\r\n    const oneC = binary.replace(reg, (x: string) => {\r\n      return x === '0' ? '1' : '0';\r\n    });\r\n    return '1' + oneC;\r\n  }\r\n  return 'X';\r\n}\r\n","import React from 'react';\r\nimport { ExecState } from 'unicoen.ts/dist/interpreter/Engine/ExecState';\r\nimport { Variable } from 'unicoen.ts/dist/interpreter/Engine/Variable';\r\n\r\ninterface PhysicalViewProps {\r\n  execState: ExecState | undefined;\r\n  selectedVar: Variable | undefined;\r\n  handleClick: (variable: Variable) => void;\r\n}\r\n\r\nfunction PhysicalView({\r\n  execState,\r\n  selectedVar,\r\n  handleClick,\r\n}: PhysicalViewProps) {\r\n  // const a = allVariables ;\r\n  return execState ? <div className=\"physical-view\">\r\n\r\n  </div> : <div></div>;\r\n}\r\n\r\nexport default PhysicalView;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport './style.scss';\r\ninterface SubtitleBlockProps {\r\n  title: string;\r\n  isActive: boolean;\r\n  handleClick: () => void;\r\n}\r\n\r\nfunction SubtitleBlock({title, isActive, handleClick}: SubtitleBlockProps) {\r\n  return (\r\n    <div\r\n      className={classNames('subtitle-block', {'subtitle-active': isActive})}\r\n      onClick={handleClick}\r\n    >\r\n      {title}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SubtitleBlock;\r\n","import classNames from 'classnames';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { ExecState } from 'unicoen.ts/dist/interpreter/Engine/ExecState';\r\nimport { Variable } from 'unicoen.ts/dist/interpreter/Engine/Variable';\r\nimport LogicalView from '../../components/memory/LogicalView';\r\nimport MemoryDetail, { MemoryInfo } from '../../components/memory/MemoryDetail';\r\nimport PhysicalView from '../../components/memory/PhysicalView';\r\nimport PanelHeader from '../../components/panelHeader/PanelHeader';\r\nimport SubtitleBlock from '../../components/subtitleBlock/SubtitleBlock';\r\nimport './style.scss';\r\n\r\n// const example_memory: MemoryInfo = {\r\n//   funcName: 'recursiveToThree',\r\n//   varName: 'n',\r\n//   address: '0xc35f',\r\n//   type: 'int',\r\n//   value: '-1',\r\n//   binaryCode0: '1000 0001',\r\n//   binaryCode1: '1000 0001',\r\n//   binaryCode2: '1000 0001',\r\n//   // binaryCode0: '1000 0000 0000 0000 0000 0000 0000 0001',\r\n//   // binaryCode1: '1111 1111 1111 1111 1111 1111 1111 1110',\r\n//   // binaryCode2: '1111 1111 1111 1111 1111 1111 1111 1111',\r\n// };\r\n\r\nconst defaultVar: Variable = new Variable('', '', '', -1, -1);\r\n\r\ninterface MemoryPanelProps {\r\n  execState: ExecState | undefined;\r\n}\r\n\r\nfunction MemoryPanel({ execState }: MemoryPanelProps) {\r\n  const [viewMode, setViewMode] = useState('logical');\r\n  const [selectedVar, setSelectedVar] = useState<Variable>();\r\n  const [lastVar, setLastVar] = useState<Variable>(defaultVar);\r\n\r\n  const handleModeChange = (mode: 'logical' | 'physical') => {\r\n    setViewMode(mode);\r\n  };\r\n\r\n  const handleSelectMemory = (newSelectedVar: Variable) => {\r\n    if (newSelectedVar.address === selectedVar?.address) {\r\n      hideDetail();\r\n    } else {\r\n      setLastVar(selectedVar ? selectedVar : defaultVar);\r\n      setSelectedVar(newSelectedVar);\r\n    }\r\n  };\r\n\r\n  const hideDetail = () => {\r\n    setLastVar(selectedVar ? selectedVar : defaultVar);\r\n    setSelectedVar(undefined);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      id=\"MemoryPanel\"\r\n      className={classNames('panel', {\r\n        'show-detail': selectedVar !== undefined,\r\n        'hide-detail': selectedVar === undefined,\r\n      })}\r\n    >\r\n      <PanelHeader title=\"Memory\" />\r\n      <div className=\"subtitle-1\">\r\n        <div className=\"subtitle-area\">\r\n          <SubtitleBlock\r\n            title=\"Logical View\"\r\n            isActive={viewMode === 'logical'}\r\n            handleClick={() => handleModeChange('logical')}\r\n          />\r\n        </div>\r\n        <div className=\"subtitle-area\">\r\n          <SubtitleBlock\r\n            title=\"Physical View\"\r\n            isActive={viewMode === 'physical'}\r\n            handleClick={() => handleModeChange('physical')}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"main-area\">\r\n        {viewMode === 'logical' ? (\r\n          <LogicalView\r\n            execState={execState}\r\n            selectedVar={selectedVar}\r\n            handleClick={handleSelectMemory}\r\n          />\r\n        ) : (\r\n          <PhysicalView\r\n            execState={execState}\r\n            selectedVar={selectedVar}\r\n            handleClick={handleSelectMemory}\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"subtitle-area\">\r\n        <SubtitleBlock\r\n          title=\"Memory Detail\"\r\n          isActive={selectedVar !== undefined}\r\n          handleClick={() => {\r\n            if (selectedVar !== undefined) {\r\n              hideDetail();\r\n            } else {\r\n              if (lastVar !== undefined) {\r\n                setSelectedVar(lastVar);\r\n              } else {\r\n                setSelectedVar(defaultVar);\r\n                // alert('Click a memory cell to start');\r\n              }\r\n            }\r\n          }}\r\n        />\r\n      </div>\r\n      <div className=\"detail-area\">\r\n        <MemoryDetail variable={selectedVar ? selectedVar : lastVar} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MemoryPanel;\r\n","export default __webpack_public_path__ + \"static/media/logo.afd13c96.svg\";","export default __webpack_public_path__ + \"static/media/icon1.c3c63206.svg\";","export default __webpack_public_path__ + \"static/media/icon2.43c03c24.svg\";","import React from 'react';\r\nimport logo from '../../assets/icon/logo.svg';\r\nimport menuIcon1 from '../../assets/icon/icon1.svg';\r\nimport menuIcon2 from '../../assets/icon/icon2.svg';\r\nimport './style.scss';\r\n\r\nfunction AppHeader() {\r\n  return (\r\n    <div id=\"AppHeader\">\r\n      <div className=\"logo\">\r\n        <svg width={400} height={64}>\r\n          <image xlinkHref={logo} height=\"64\" width=\"400\" />\r\n        </svg>\r\n      </div>\r\n      <div className=\"menu\">\r\n          <div></div>\r\n        <div className=\"menu-item\">\r\n          <svg width={20} height={20}>\r\n            <image xlinkHref={menuIcon1} height=\"20\" width=\"20\" />\r\n          </svg>\r\n        </div>\r\n        <div className=\"menu-item\">\r\n          <svg width={20} height={20}>\r\n            <image xlinkHref={menuIcon2} height=\"20\" width=\"20\" />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AppHeader;\r\n","import React, { useEffect, useState } from 'react';\r\nimport './App.scss';\r\nimport EditorPanel from './panels/editorPanel/EditorPanel';\r\nimport ConsolePanel from './panels/consolePanel/ConsolePanel';\r\nimport TimelinePanel, {\r\n  VariableWithSteps,\r\n} from './panels/timelinePanel/TimelinePanel';\r\nimport CallStackPanel from './panels/callStackPanel/CallStackPanel';\r\nimport MemoryPanel from './panels/memoryPanel/MemoryPanel';\r\nimport ContainerDimensions from 'react-container-dimensions';\r\nimport AppHeader from './components/appHeader/AppHeader';\r\nimport { ExecState } from 'unicoen.ts/dist/interpreter/Engine/ExecState';\r\nimport { remove, slot } from './components/emitter';\r\nimport { unstable_batchedUpdates } from 'react-dom';\r\n\r\nfunction App() {\r\n  const [execState, setExecState] = useState<ExecState | undefined>();\r\n  const [lastState, setLastState] = useState<ExecState | undefined>();\r\n  const [variableShowUps, setVariableShowUps] = useState<VariableWithSteps[]>([]);\r\n\r\n  useEffect(() => {\r\n    slot(\r\n      'draw',\r\n      (execState: ExecState | undefined, lastState: ExecState | undefined) => {\r\n        unstable_batchedUpdates(() => {\r\n          setExecState(execState);\r\n          setLastState(lastState);\r\n        });\r\n      }\r\n    );\r\n    return () => {\r\n      remove('draw');\r\n    };\r\n  }, []);\r\n\r\n  const updVariableShowUps = (variableShowUps: VariableWithSteps[]) => {\r\n    setVariableShowUps(variableShowUps);\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"Row-1\">\r\n        <AppHeader />\r\n      </div>\r\n      <div className=\"Row-2\">\r\n        <div className=\"Col-1\">\r\n          <EditorPanel />\r\n          <ConsolePanel />\r\n        </div>\r\n        <div className=\"Col-2\">\r\n          <ContainerDimensions>\r\n            {({ width, height }: { width: number; height: number }) => (\r\n              <React.Fragment>\r\n                <TimelinePanel variableShowUps={variableShowUps} updVariableShowUps={updVariableShowUps} />\r\n                <CallStackPanel\r\n                  width={width}\r\n                  height={height}\r\n                  execState={execState}\r\n                  lastState={lastState}\r\n                  variableShowUps={variableShowUps}\r\n                />\r\n              </React.Fragment>\r\n            )}\r\n          </ContainerDimensions>\r\n        </div>\r\n        <div className=\"Col-3\">\r\n          <MemoryPanel execState={execState} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import {EventEmitter} from 'events';\nexport const emitter = new EventEmitter();\nemitter.setMaxListeners(20);\nexport type event =\n  | 'debug'\n  | 'changeTheme'\n  | 'changeLang'\n  | 'changeProgLang'\n  | 'changeState'\n  | 'changeOutput'\n  | 'zoom'\n  | 'draw'\n  | 'redraw'\n  | 'EOF'\n  | 'stdin'\n  | 'Breakpoint'\n  | 'files'\n  | 'changeStep'\n  | 'jumpTo'\n  | 'init'\n  | 'statementHighlight'\n  | 'cancelStatementHighlight';\nexport const slot = (\n  event: event,\n  listener: (...args: any[]) => void\n): EventEmitter => {\n  return emitter.on(event, listener);\n};\nexport const signal = (event: event, ...args: any[]): boolean => {\n  // console.log('Log | signal: ' + event + ' ' + args);\n  return emitter.emit(event, ...args);\n};\nexport const remove = (event: event) => {\n  emitter.removeAllListeners(event);\n};\n\nexport const showEvents = () => {\n  const eventNames = emitter.eventNames();\n  console.log('Eventnames: ' + eventNames);\n};\n"],"sourceRoot":""}